var _e=Object,Ge=Symbol,qe=/\B([A-Z])/g;function be(n){return n.replace(qe,"-$1").toLowerCase()}var V=n=>typeof n=="function";var T,D=1,se=2,xe=4,ae=8;var we=32,Ve=(n,e)=>n.c-e.c,d,p,_,h=0,K,I=0,re=0,Ce=0;function oe(){I++}function ue(){if(I>1){I--;return}let n,e=!1;for(;K;){let t=K.sort(Ve),i=0,s=t.length;for(K=T,re++;i<s;i++){let a=t[i];if(a.d&=~se,!(a.d&ae)&&Ue(a))try{a.m()}catch(l){e||(n=l,e=!0)}}}if(re=0,I--,e)throw n}function Ue(n){let e=n.b,t=e.length,i=0,s;for(;i<t;i++)if(s=e[i],s.e>n.e||s.h())return!0;return!1}function Be(){let n=p.b;if(_){if(ge(),h>0){let i=_.length,s=0;for(n.length=h+i;s<i;s++)n[h+s]=_[s]}else n=p.b=_;let e=n.length,t=h;for(;t<e;t++){let i=n[t];i.i=T,p.d&we&&i.j(p)}}else h<p.b.length&&(ge(),n.length=h);for(;h--;){let e=n[h];e.i=T}}function ge(){let n=p.b,e=n.length,t=h;for(;t<e;t++)n[t].g(p)}function ye(n){let e=n.b,t=e.length,i=0;for(;i<t;i++)e[i].g(n);e.length=0}var G=class{constructor(e){let t=this;t.a=e,t.e=-1,t.f=[],t.i=T}h(){return!1}j(e){this.f.push(e)}g(e){let i=this.f,s=i.indexOf(e);i.splice(s,1)}peek(){return this.a}get value(){let e=this;return p&&e.i!==p&&(e.i=p,_?_.push(e):p.b[h]===e?h++:_=[e]),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.e=++Ce,re<100)){let i=t.f,s=i.length,a=0;for(oe();a<s;a++)i[a].k();ue()}}};var Y=class{constructor(e){let t=this;t.l=e,t.e=0,t.b=[],t.d=we,t.c=0}m(){let e=this;if(e.d&D)return;e.e=Ce,e.d|=D,e.d&=~xe;let t=p,i=_,s=h;try{oe(),p=e,_=T,h=0,e.l()}finally{Be(),p=t,_=i,h=s,e.d&=~D,e.d&ae&&ye(e),ue()}}k(){let e=this;e.d&(se|D)||(e.d|=xe|se,(K||=[]).push(e))}o(){let e=this;e.d|=ae,e.d&D||ye(e)}},q=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=T,t.c=0,!e&&d&&(t.parent=d,t.c=d.c+1,d.scopes.push(t))}run(e){let t=d;try{return d=this,e()}finally{d=t}}clear(){let e=this,t=e.scopes,i=e.cleanups;for(let s of t)s.clear(),s.parent=T;for(let s of i)s();t.length=0,i.length=0}};function U(n){return new q(n)}function Q(n){V(n)&&d&&d.cleanups.push(n)}function X(n){if(I>0)return n();oe();try{return n()}finally{ue()}}function v(n){return new G(n)}function c(n){let e=new Y(n),t=e.o.bind(e);try{e.m()}catch(i){throw t(),i}return d&&e.b.length>0&&(e.c=d.c,d.cleanups.push(t)),t}var Fe=!1,ze=1;var A=null,ce=Ge(),Z=class extends HTMLElement{$m=!1;$c=U(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,i=e.constructor.$d;for(let s in i){let a=i[s];t[a]=v(ce)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,i=e.constructor.$s,s=e.$c,a=e.$h,l=e.shadowRoot;l||(l=e.attachShadow({mode:"open"}),l.adoptedStyleSheets=i);let r=A;try{A=e,s.run(()=>t(l,e));for(let o of a){let u=o();V(u)&&s.cleanups.push(u)}a.length=0}finally{A=r}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,i){let s=this,a=s.constructor.$d;e in a&&(s.$p[a[e]].value=i===""?!0:i)}};function B(n,e,t,i){let s=[],a=_e.create(null);class l extends Z{static observedAttributes=s;static $c=e;static $a=a;static $d=t;static $s=i}for(let r in t){let o=t[r],u=be(r);a[u]=r,s.push(u),_e.defineProperty(l.prototype,r,{get(){return this.$p[o].a},set(f){this.$p[o].value=f}})}return Fe&&(n="velvet-"+ze++),n&&customElements.define(n,l),l}function S(n,e){let t=A.$p[n];return t.value===ce&&(t.value=V(e)?e():e),t}function W(n){V(n)&&A.$h.push(n)}function M(n,e){let t=document.createElement("template");if(t.innerHTML=n,e){let i=t.content,s=i.firstChild,a;for(s.remove();a=s.firstChild;)i.appendChild(a)}return t}function E(n){return document.importNode(n.content,!0)}function x(n){return n.firstChild}function R(n){return n.nextSibling}function $(n,e,t){if(n.replaceWith(e),t){let i;for(;i=n.firstChild;)e.appendChild(i)}}function F(n,e){n.append(e)}function z(n,e){n.after(e)}function Te(n,e){let t=n;if(e.nextSibling!==n)for(;t;){let i=t;if(t=t.nextSibling,i.remove(),i===e)break}}function ee(n,e,t){n.classList.toggle(e,t)}function te(n,e,t){n.style.setProperty(e,t)}function fe(n,e,t){let i=document.createTextNode("");t(n,i),c(()=>i.data=e())}function Se(n,e){let t=U(),i,s;c(()=>{let a=e();a!==i&&(s&&(t.clear(),Ee(n,s),s=null),i=a,a&&(s=t.run(()=>a(n))))})}function Me(n,e,t){let i=[],s=d.c+1;c(()=>{let a=t(),l=0,r=a.length,o=i.length;for(;l<r;l++)if(i[l]){let u=i[l][2];u.value=a[l]}else{let u=i[l-1],f=u?u[1]:n,g=v(a[l]),y=U(!0);y.c=s,i[l]=[y,y.run(()=>e(f,g,l)),g]}if(o>r){let u=i[l-1],f=u?u[1]:n,g=i[o-1][1];for(;l<o;l++)i[l][0].clear();Ee(f,g),i.length=r}}),Q(()=>{for(let a=0,l=i.length;a<l;a++)i[a][0].clear()})}function Ee(n,e){Te(n.nextSibling,e)}var tt=M("<div class=cursor><!></div>"),nt=M("<span class=label> <!>, <!> </span>");function it(n,e){let t=S(0,!1),i=S(1,0),s=S(2,0),a=S(3,!1),l=S(4),r=E(tt),o=x(r),u=x(o),f=g=>{let y=E(nt),L=x(y),j=R(x(L)),k=R(R(j)),H=R(k);return fe(j,()=>i.value,$),fe(k,()=>s.value,$),z(g,y),L};c(()=>ee(o,"big",a.value)),c(()=>ee(o,"label",t.value)),c(()=>te(o,"border-color",l.value)),c(()=>te(o,"transform",`translate(${i.value}px, ${s.value}px) scale(${a.value?2:1})`)),Se(u,()=>t.value?f:null),F(n,r)}var J=B("x-cursor",it,{label:0,x:1,y:2,big:3,color:4},[]);var lt=M("<div class=main><x></x></div>"),st=M("<x></x>");function at(n,e){let s=v(0),a=v(0),l=v(!1),r=v(0),o=v(!1),u=v([]);c(()=>{let b=500+Math.round(Math.sin(r.value/90*2*Math.PI)*500*.5),P=[];for(let C=b;C--;){let O=C/b*6,w=O*2*Math.PI,ve=20+C*2,Ie=(O*255+r.value*10)%255;P[C]={color:`hsl(${Ie}, 100%, 50%)`,x:s.value+Math.sin(w)*ve|0,y:a.value+Math.cos(w)*ve|0}}u.value=P});let f={timeout:!1,x:0,y:0};function g(b){f.x=b.x,f.y=b.y,f.timeout||(f.timeout=!0,requestAnimationFrame(()=>X(()=>{f.timeout=!1,s.value=f.x,a.value=f.y})))}function y(){l.value=!0}function L(b){l.value=!1}function le(){o.value||(r.value++,requestAnimationFrame(le))}W(()=>(window.addEventListener("pointermove",g),window.addEventListener("pointerdown",y),window.addEventListener("pointerup",L),requestAnimationFrame(le),()=>{window.removeEventListener("pointermove",g),window.removeEventListener("pointerdown",y),window.removeEventListener("pointerup",L),o.value=!0}));let j=E(lt),k=x(x(j)),H=new J,De=(b,P)=>{let C=E(st),O=x(C),w=new J;return c(()=>w.color=P.value.color),c(()=>w.x=P.value.x),c(()=>w.y=P.value.y),c(()=>w.big=l.value),$(O,O=w,!0),z(b,C),O};H.label=!0,c(()=>H.x=s.value),c(()=>H.y=a.value),c(()=>H.big=l.value),$(k,k=H,!0),Me(k,De,()=>u.value),F(n,j)}var he=B("x-spiral",at,{},[]);var ie=100,$e=function(){function n(e,t,i,s){this.min=e,this.max=t,this.mean=i,this.last=s}return n}(),pe=function(){function n(e){this.samples=[],this.maxSamples=e,this._i=-1}return n.prototype.addSample=function(e){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=e},n.prototype.each=function(e){for(var t=this.samples,i=0;i<t.length;i++)e(t[(this._i+1+i)%t.length],i)},n.prototype.calc=function(){var e=this.samples;if(e.length===0)return new $e(0,0,0,0);for(var t=e[(this._i+1)%e.length],i=t,s=0,a=0;a<e.length;a++){var l=e[(this._i+1+a)%e.length];l<t&&(t=l),l>i&&(i=l),s+=l}var r=e[this._i],o=s/e.length;return new $e(t,i,o,r)},n}(),rt=function(){function n(){this.value=0,this.onChange=null}return n.prototype.inc=function(e){e>0&&(this.value+=e,this.onChange())},n}(),ot=function(){function n(e,t){this.value=t,this.next=null}return n}(),ut=function(){function n(e){var t=this;this._dec=function(){for(var i=performance.now();t._firstTimestamp!==null;){var s=t._firstTimestamp;if(i>=s.value)t.value-=s.value,t._firstTimestamp=t._firstTimestamp.next;else{setTimeout(t._dec,Math.ceil(s.value-i));break}}t._firstTimestamp===null&&(t._lastTimestamp=null),t.onChange()},this.interval=e,this.value=0,this.onChange=null,this._firstTimestamp=null,this._lastTimestamp=null}return n.prototype.inc=function(e){if(e>0){var t=new ot(performance.now()+this.interval,e);this._firstTimestamp===null?(this._firstTimestamp=t,setTimeout(this._dec,this.interval)):this._lastTimestamp.next=t,this._lastTimestamp=t,this.value+=e,this.onChange()}},n}(),de=[],ke=-1;function ct(n){de.push(n),ke===-1&&requestAnimationFrame(function(e){ke=-1;var t=de;de=[];for(var i=0;i<t.length;i++)t[i]()})}var Pe=function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ne=30,He=ie,Oe=function(){function n(e){var t=this;this._sync=function(){t.sync(),t._dirty=!1},this.name=e,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return n.prototype.invalidate=function(){this._dirty||(this._dirty=!0,ct(this._sync))},n.prototype.sync=function(){throw new Error("sync method not implemented")},n}(),m;(function(n){n[n.HideMin=1]="HideMin",n[n.HideMax=2]="HideMax",n[n.HideMean=4]="HideMean",n[n.HideLast=8]="HideLast",n[n.HideGraph=16]="HideGraph",n[n.RoundValues=32]="RoundValues"})(m||(m={}));var me=function(n){Pe(e,n);function e(t,i,s,a){var l=n.call(this,t)||this;l.flags=i,l.unitName=s,l.samples=a;var r=document.createElement("div");r.style.cssText="text-align: center",r.textContent=l.name;var o=document.createElement("div");return i&m.HideMin?l.minText=null:(l.minText=document.createElement("div"),o.appendChild(l.minText)),i&m.HideMax?l.maxText=null:(l.maxText=document.createElement("div"),o.appendChild(l.maxText)),i&m.HideMean?l.meanText=null:(l.meanText=document.createElement("div"),o.appendChild(l.meanText)),i&m.HideLast?l.lastText=null:(l.lastText=document.createElement("div"),o.appendChild(l.lastText)),l.element.appendChild(r),l.element.appendChild(o),i&m.HideGraph?(l.canvas=null,l.ctx=null):(l.canvas=document.createElement("canvas"),l.canvas.style.cssText="display: block; padding: 0; margin: 0",l.canvas.width=He,l.canvas.height=ne,l.ctx=l.canvas.getContext("2d"),l.element.appendChild(l.canvas)),l}return e.prototype.sync=function(){var t=this,i=this.samples.calc(),s=ne/(i.max*1.2),a,l,r,o;this.flags&m.RoundValues?(a=Math.round(i.min).toString(),l=Math.round(i.max).toString(),r=Math.round(i.mean).toString(),o=Math.round(i.last).toString()):(a=i.min.toFixed(2),l=i.max.toFixed(2),r=i.mean.toFixed(2),o=i.last.toFixed(2)),this.minText!==null&&(this.minText.textContent="min: \xA0"+a+this.unitName),this.maxText!==null&&(this.maxText.textContent="max: \xA0"+l+this.unitName),this.meanText!==null&&(this.meanText.textContent="mean: "+r+this.unitName),this.lastText!==null&&(this.lastText.textContent="last: "+o+this.unitName),this.ctx!==null&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,He,ne),this.ctx.fillStyle="#0f0",this.samples.each(function(u,f){t.ctx.fillRect(f,ne,1,-(u*s))}))},e}(Oe),ft=function(n){Pe(e,n);function e(t,i){var s=n.call(this,t)||this;return s.counter=i,s.text=document.createElement("div"),s.element.appendChild(s.text),s}return e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value},e}(Oe),N=null,ht=!1;function Ae(){N||(N=document.createElement("div"),N.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(N)),ht=!0}function Re(n){n===void 0&&(n=m.HideMin|m.HideMax|m.HideMean|m.RoundValues),Ae();var e=new pe(ie),t=new me("FPS",n,"",e);N.appendChild(t.element);var i=2/121,s=0,a=60;function l(r){s>0&&(a+=i*(1e3/(r-s)-a)),s=r,e.addSample(a),t.invalidate(),requestAnimationFrame(l)}requestAnimationFrame(l)}function Ne(n){if(n===void 0&&(n=m.HideMin|m.HideMean),Ae(),performance.memory===void 0)return;var e=new pe(ie),t=new me("Memory",n,"MB",e);N.appendChild(t.element);function i(){e.addSample(Math.round(performance.memory.usedJSHeapSize/(1024*1024))),t.invalidate(),setTimeout(i,30)}i()}var Bt=function(){function n(e,t,i){this.data=new pe(ie),this.widget=new me(e,i,t,this.data),this.startTime=-1}return n}();var Ft=function(){function n(e,t){var i=this;this.data=t===void 0?new rt:new ut(t),this.widget=new ft(e,this.data),this.data.onChange=function(){i.widget.invalidate()}}return n}();Le(he);Le(J);/[&?]perfmon=(false|off|0)\b/.test(location.search)||(Re(),Ne());var pt=new he;document.body.appendChild(pt);function Le(n){n.prototype.attachShadow=function(){return this.shadowRoot||Object.defineProperty(this,"shadowRoot",{value:this}),this}}
//# sourceMappingURL=index.js.map

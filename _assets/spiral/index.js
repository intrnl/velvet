function C(n,e){let t=document.createElement("template");if(t.innerHTML=n,e){let i=t.content,l=i.firstChild,r;for(l.remove();r=l.firstChild;)i.appendChild(r)}return t}function T(n){return document.importNode(n.content,!0)}function x(n,e){let t=n,i=0,l=e.length,r,a;for(;i<l;i++)for(r=e[i],t=t.firstChild,a=0;a<r;a++)t=t.nextSibling;return t}function j(n,e,t){if(n.replaceWith(e),t){let i;for(;i=n.firstChild;)e.appendChild(i)}}function S(n,e){n.append(e)}function L(n,e){n.after(e)}function me(n,e){let t=n;if(e.nextSibling!==n)for(;t;){let i=t;if(t=t.nextSibling,i.remove(),i===e)break}}function le(n,e,t){n.setAttribute(e,t)}function X(n,e,t){n.classList.toggle(e,t)}function Y(n,e,t){n.style.setProperty(e,t)}var J=Object,Re=Symbol,je=/\B([A-Z])/g;function ve(n){return n.replace(je,"-$1").toLowerCase()}var Le=J.is,De=J.assign,D=n=>typeof n=="function";var h,P=1<<0,ie=1<<1,pt=1<<2,A=1<<3,mt=1<<4,_e=1<<5,p,d,z,O=0,ae=0,Ie=0;function re(){O++}function se(){if(O>1){O--;return}let n,e=!1;for(;z;){let t=z.sort((r,a)=>r.i-a.i),i=0,l=t.length;for(z=h,ae++;i<l;i++){let r=t[i];if(r.c&=~ie,!(r.c&A)&&Ge(r))try{r.t()}catch(a){e||(n=a,e=!0)}}}if(ae=0,O--,e)throw n}function qe(n){if(!d)return h;let e=n.k;return!e||e.q!==d?(e={d:0,n:e,g:n,h:d.b,e:h,q:d,l:h,j:h},d.b&&(d.b.e=e),d.b=e,n.k=e,d.c&_e&&n.o(e),e):e.d===-1?(e.d=0,e.e&&(e.e.h=e.h,e.h&&(e.h.e=e.e),e.h=d.b,e.e=h,d.b.e=e,d.b=e),e):h}function Ge(n){for(let e=n.b;e;e=e.e)if(e.g.d!==e.d||!e.g.p()||e.g.d!==e.d)return!0;return!1}function Ve(n){for(let e=n.b;e;e=e.e){let t=e.g.k;if(t&&(e.n=t),e.g.k=e,e.d=-1,!e.e){n.b=e;break}}}function xe(n){let e=n.b,t=h;for(;e;){let i=e.h;e.d===-1?(e.g.m(e),i&&(i.e=e.e),e.e&&(e.e.h=i)):t=e,e.g.k=e.n,e.n&&(e.n=h),e=i}n.b=t}function ye(n){for(let e=n.b;e;e=e.e)e.g.m(e);n.b=h}function Ue(n){let e=this;xe(e),d=n,e.c&=~P,e.c&A&&ye(e),se()}var N=class{constructor(e){this.a=e,this.d=0,this.k=h,this.f=h}p(){return!0}o(e){let t=this;t.f!==e&&!e.l&&(e.j=t.f,t.f&&(t.f.l=e),t.f=e)}m(e){let t=this;if(t.f){let i=e.l,l=e.j;i&&(i.j=l,e.l=h),l&&(l.l=i,e.j=h),e===t.f&&(t.f=l)}}subscribe(e){let t=this;return f(()=>{let i=d,l=t.value;try{d=h,e(l)}finally{d=i}})}set(e){return this.value=e}peek(){return this.a}get value(){let e=this,t=qe(e);return t&&(t.d=e.d),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.d++,Ie++,ae<100)){re();try{for(let i=t.f;i;i=i.j)i.q.r()}finally{se()}}}};var K=class{constructor(e){this.s=e,this.b=h,this.c=_e,this.i=0}t(){let e=this;if(e.c&(P|A))return;let t=e.v();try{e.s()}finally{t()}}v(){let e=this;e.c|=P,e.c&=~A,xe(e),Ve(e),re();let t=d;return d=e,Ue.bind(e,t)}r(){let e=this;e.c&(ie|P)||(e.c|=ie,(z||=[]).push(e))}w(){let e=this;e.c|=A,e.c&P||ye(e)}},R=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=h,t.i=0,!e&&p&&(t.parent=p,t.i=p.i+1,p.scopes.push(t))}run(e){let t=p;try{return p=this,e()}finally{p=t}}clear(){let e=this,t=e.scopes,i=e.cleanups;for(let l of t)l.clear(),l.parent=h;for(let l of i)l();t.length=0,i.length=0}};function I(n){return new R(n)}function Z(n){D(n)&&p&&p.cleanups.push(n)}function W(n){if(O>0)return n();re();try{return n()}finally{se()}}function _(n){return new N(n)}function f(n){let e=new K(n),t=e.w.bind(e);try{e.t()}catch(i){throw t(),i}return p&&e.b&&(e.i=p.i,p.cleanups.push(t)),t}var Be=!1,Fe=1;var $=null,oe=Re(),Q=class extends HTMLElement{$m=!1;$c=I(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,i=e.constructor.$d;for(let l in i){let r=i[l];t[r]=_(oe)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,i=e.constructor.$s,l=e.$c,r=e.$h,a=e.shadowRoot,s=!1;a||(a=e.attachShadow({mode:"open"}),s=!0);let o=$;try{if($=e,l.run(()=>t(a,e)),document.adoptedStyleSheets)s&&(a.adoptedStyleSheets=i);else for(let u of i)S(a,u.cloneNode(!0));for(let u of r){let c=u();D(c)&&l.cleanups.push(c)}r.length=0}finally{$=o}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,i){let l=this,r=l.constructor.$d;e in r&&(l.$p[r[e]].value=i===""?!0:i)}};function q(n,e,t,i){let l=[],r=J.create(null);class a extends Q{static observedAttributes=l;static $c=e;static $a=r;static $d=t;static $s=i}for(let s in t){let o=t[s],u=ve(s);r[u]=s,l.push(u),J.defineProperty(a.prototype,s,{get(){return this.$p[o].a},set(c){this.$p[o].value=c}})}return Be&&(n="velvet-"+Fe++),n&&customElements.define(n,a),a}function M(n,e){let t=$.$p[n];return t.value===oe&&(t.value=D(e)?e():e),t}function ee(n){D(n)&&$.$h.push(n)}function ue(n,e){let t=document.createTextNode("");n.nodeType===1?S(n,t):j(n,t,!1),f(()=>t.data=e())}function be(n,e){let t=I(),i,l;f(()=>{let r=e();r!==i&&(l&&(t.clear(),we(n,l),l=null),i=r,r&&(l=t.run(()=>r(n))))})}function ge(n,e,t){let i=[],l=p.i+1;f(()=>{let r=t(),a=0,s=r.length,o=i.length;for(;a<s;a++)if(i[a]){let u=i[a][2];u.value=r[a]}else{let u=i[a-1],c=u?u[1]:n,y=_(r[a]),v=I(!0);v.i=l,i[a]=[v,v.run(()=>e(c,y,a)),y]}if(o>s){let u=i[a-1],c=u?u[1]:n,y=i[o-1][1];for(;a<o;a++)i[a][0].clear();we(c,y),i.length=s}}),Z(()=>{for(let r=0,a=i.length;r<a;r++)i[r][0].clear()})}function we(n,e){me(n.nextSibling,e)}var et=C("<div><!></div>"),tt=C("<span class=label> <!>, <!> </span>");function nt(n,e){let t=M(0,!1),i=M(1,0),l=M(2,0),r=M(3,!1),a=M(4),s=T(et),o=x(s,[0,0]),u=x(s,[0]),c=y=>{let v=T(tt),V=x(v,[0,1]),U=x(v,[0,3]),B=x(v,[0]);return ue(V,()=>i.value),ue(U,()=>l.value),L(y,v),B};be(o,()=>t.value?c:null),le(u,"class","cursor"),f(()=>X(u,"big",r.value)),f(()=>X(u,"label",t.value)),f(()=>Y(u,"border-color",a.value)),f(()=>Y(u,"transform",`translate(${i.value}px, ${l.value}px) scale(${r.value?2:1})`)),S(n,s)}var G=q("x-cursor",nt,{label:0,x:1,y:2,big:3,color:4},[]);var it=C("<div class=main><x></x></div>"),at=C("<x></x>");function lt(n,e){let l=_(0),r=_(0),a=_(!1),s=_(0),o=_(!1),u=_([]);f(()=>{let g=500+Math.round(Math.sin(s.value/90*2*Math.PI)*500*.5),k=[];for(let w=g;w--;){let b=w/g*6,F=b*2*Math.PI,pe=20+w*2,Ne=(b*255+s.value*10)%255;k[w]={color:`hsl(${Ne}, 100%, 50%)`,x:l.value+Math.sin(F)*pe|0,y:r.value+Math.cos(F)*pe|0}}u.value=k});let c={timeout:!1,x:0,y:0};function y(g){c.x=g.x,c.y=g.y,c.timeout||(c.timeout=!0,requestAnimationFrame(()=>W(()=>{c.timeout=!1,l.value=c.x,r.value=c.y})))}function v(){a.value=!0}function V(g){a.value=!1}function U(){o.value||(s.value++,requestAnimationFrame(U))}ee(()=>(window.addEventListener("pointermove",y),window.addEventListener("pointerdown",v),window.addEventListener("pointerup",V),requestAnimationFrame(U),()=>{window.removeEventListener("pointermove",y),window.removeEventListener("pointerdown",v),window.removeEventListener("pointerup",V),o.value=!0}));let B=T(it),E=new G,Ae=x(B,[0,0]),Oe=(g,k)=>{let w=T(at),b=new G,F=x(w,[0]);return f(()=>b.color=k.value.color),f(()=>b.x=k.value.x),f(()=>b.y=k.value.y),f(()=>b.big=a.value),j(F,b,!0),L(g,w),b};e:E.label=!0;f(()=>E.x=l.value),f(()=>E.y=r.value),f(()=>E.big=a.value),j(Ae,E,!0),ge(E,Oe,()=>u.value),S(n,B)}var ce=q("x-spiral",lt,{},[]);var ne=100,Ce=function(){function n(e,t,i,l){this.min=e,this.max=t,this.mean=i,this.last=l}return n}(),he=function(){function n(e){this.samples=[],this.maxSamples=e,this._i=-1}return n.prototype.addSample=function(e){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=e},n.prototype.each=function(e){for(var t=this.samples,i=0;i<t.length;i++)e(t[(this._i+1+i)%t.length],i)},n.prototype.calc=function(){var e=this.samples;if(e.length===0)return new Ce(0,0,0,0);for(var t=e[(this._i+1)%e.length],i=t,l=0,r=0;r<e.length;r++){var a=e[(this._i+1+r)%e.length];a<t&&(t=a),a>i&&(i=a),l+=a}var s=e[this._i],o=l/e.length;return new Ce(t,i,o,s)},n}(),rt=function(){function n(){this.value=0,this.onChange=null}return n.prototype.inc=function(e){e>0&&(this.value+=e,this.onChange())},n}(),st=function(){function n(e,t){this.value=t,this.next=null}return n}(),ot=function(){function n(e){var t=this;this._dec=function(){for(var i=performance.now();t._firstTimestamp!==null;){var l=t._firstTimestamp;if(i>=l.value)t.value-=l.value,t._firstTimestamp=t._firstTimestamp.next;else{setTimeout(t._dec,Math.ceil(l.value-i));break}}t._firstTimestamp===null&&(t._lastTimestamp=null),t.onChange()},this.interval=e,this.value=0,this.onChange=null,this._firstTimestamp=null,this._lastTimestamp=null}return n.prototype.inc=function(e){if(e>0){var t=new st(performance.now()+this.interval,e);this._firstTimestamp===null?(this._firstTimestamp=t,setTimeout(this._dec,this.interval)):this._lastTimestamp.next=t,this._lastTimestamp=t,this.value+=e,this.onChange()}},n}(),fe=[],Te=-1;function ut(n){fe.push(n),Te===-1&&requestAnimationFrame(function(e){Te=-1;var t=fe;fe=[];for(var i=0;i<t.length;i++)t[i]()})}var Me=function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),te=30,Se=ne,Ee=function(){function n(e){var t=this;this._sync=function(){t.sync(),t._dirty=!1},this.name=e,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return n.prototype.invalidate=function(){this._dirty||(this._dirty=!0,ut(this._sync))},n.prototype.sync=function(){throw new Error("sync method not implemented")},n}(),m;(function(n){n[n.HideMin=1]="HideMin",n[n.HideMax=2]="HideMax",n[n.HideMean=4]="HideMean",n[n.HideLast=8]="HideLast",n[n.HideGraph=16]="HideGraph",n[n.RoundValues=32]="RoundValues"})(m||(m={}));var de=function(n){Me(e,n);function e(t,i,l,r){var a=n.call(this,t)||this;a.flags=i,a.unitName=l,a.samples=r;var s=document.createElement("div");s.style.cssText="text-align: center",s.textContent=a.name;var o=document.createElement("div");return i&m.HideMin?a.minText=null:(a.minText=document.createElement("div"),o.appendChild(a.minText)),i&m.HideMax?a.maxText=null:(a.maxText=document.createElement("div"),o.appendChild(a.maxText)),i&m.HideMean?a.meanText=null:(a.meanText=document.createElement("div"),o.appendChild(a.meanText)),i&m.HideLast?a.lastText=null:(a.lastText=document.createElement("div"),o.appendChild(a.lastText)),a.element.appendChild(s),a.element.appendChild(o),i&m.HideGraph?(a.canvas=null,a.ctx=null):(a.canvas=document.createElement("canvas"),a.canvas.style.cssText="display: block; padding: 0; margin: 0",a.canvas.width=Se,a.canvas.height=te,a.ctx=a.canvas.getContext("2d"),a.element.appendChild(a.canvas)),a}return e.prototype.sync=function(){var t=this,i=this.samples.calc(),l=te/(i.max*1.2),r,a,s,o;this.flags&m.RoundValues?(r=Math.round(i.min).toString(),a=Math.round(i.max).toString(),s=Math.round(i.mean).toString(),o=Math.round(i.last).toString()):(r=i.min.toFixed(2),a=i.max.toFixed(2),s=i.mean.toFixed(2),o=i.last.toFixed(2)),this.minText!==null&&(this.minText.textContent="min: \xA0"+r+this.unitName),this.maxText!==null&&(this.maxText.textContent="max: \xA0"+a+this.unitName),this.meanText!==null&&(this.meanText.textContent="mean: "+s+this.unitName),this.lastText!==null&&(this.lastText.textContent="last: "+o+this.unitName),this.ctx!==null&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,Se,te),this.ctx.fillStyle="#0f0",this.samples.each(function(u,c){t.ctx.fillRect(c,te,1,-(u*l))}))},e}(Ee),ct=function(n){Me(e,n);function e(t,i){var l=n.call(this,t)||this;return l.counter=i,l.text=document.createElement("div"),l.element.appendChild(l.text),l}return e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value},e}(Ee),H=null,ft=!1;function ke(){H||(H=document.createElement("div"),H.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(H)),ft=!0}function $e(n){n===void 0&&(n=m.HideMin|m.HideMax|m.HideMean|m.RoundValues),ke();var e=new he(ne),t=new de("FPS",n,"",e);H.appendChild(t.element);var i=2/121,l=0,r=60;function a(s){l>0&&(r+=i*(1e3/(s-l)-r)),l=s,e.addSample(r),t.invalidate(),requestAnimationFrame(a)}requestAnimationFrame(a)}function He(n){if(n===void 0&&(n=m.HideMin|m.HideMean),ke(),performance.memory===void 0)return;var e=new he(ne),t=new de("Memory",n,"MB",e);H.appendChild(t.element);function i(){e.addSample(Math.round(performance.memory.usedJSHeapSize/(1024*1024))),t.invalidate(),setTimeout(i,30)}i()}var Gt=function(){function n(e,t,i){this.data=new he(ne),this.widget=new de(e,i,t,this.data),this.startTime=-1}return n}();var Vt=function(){function n(e,t){var i=this;this.data=t===void 0?new rt:new ot(t),this.widget=new ct(e,this.data),this.data.onChange=function(){i.widget.invalidate()}}return n}();Pe(ce);Pe(G);/[&?]perfmon=(false|off|0)\b/.test(location.search)||($e(),He());var dt=new ce;document.body.appendChild(dt);function Pe(n){n.prototype.attachShadow=function(){return this.shadowRoot||Object.defineProperty(this,"shadowRoot",{value:this}),this}}
//# sourceMappingURL=index.js.map

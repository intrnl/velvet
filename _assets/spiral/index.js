function C(n,e){let t=document.createElement("template");if(t.innerHTML=n,e){let i=t.content,l=i.childNodes[0],s=l.childNodes,a=s.length;for(l.remove();a--;)i.appendChild(s[0])}return t}function T(n){return document.importNode(n.content,!0)}function x(n,e){let t=n,i=0,l=e.length,s,a;for(;i<l;i++)for(s=e[i],t=t.firstChild,a=0;a<s;a++)t=t.nextSibling;return t}function N(n,e,t){if(n.replaceWith(e),t){let i=n.childNodes,l=i.length;for(;l--;)e.appendChild(i[0])}}function w(n,e){n.append(e)}function I(n,e){n.after(e)}function se(n,e){let t=n;if(e.nextSibling!==n)for(;t;){let i=t;if(t=t.nextSibling,i.remove(),i===e)break}}function re(n,e,t){n.setAttribute(e,t)}function W(n,e,t){n.classList.toggle(e,t)}function ee(n,e,t){n.style.setProperty(e,t)}var Q=Object,Oe=Symbol,Le=/\B([A-Z])/g;function _e(n){return n.replace(Le,"-$1").toLowerCase()}var xe=Q.is,je=Q.assign,D=n=>typeof n=="function";var h,O=1<<0,Y=1<<1,ae=1<<2,ht=1<<3,ye=1<<4,K=1<<5,p,d,$,L=0,le=0,Ie=0;function oe(){L++}function ue(){if(L>1){L--;return}let n,e=!1;for(;$;){let t=$.sort((i,l)=>i.h-l.h);$=h,le++;for(let i=0,l=t.length;i<l;i++){let s=t[i];s.c&=~ae;try{s.s()}catch(a){e||(n=a,e=!0)}}}if(le=0,L--,e)throw n}function De(n){let e;if(d)if(e=n.k,!e||e.p!==d)e={d:0,c:0,m:h,g:n,e:d.b,i:h,p:d,j:h,n:h},d.b=e,n.k=e,d.c&ye&&n.o(e);else if(e.c&Y){e.c&=~Y;let t=d.b,i=e.i,l=e.e;e!==t&&(i&&(i.e=l),l&&(l.i=i),t&&(t.i=e),e.i=h,e.e=t,d.b=e)}else e=h;try{return n.peek()}finally{e&&(e.d=n.d)}}function qe(n){for(let e=n.b;e;e=e.e){let t=e.g.k;t&&(e.m=t),e.g.k=e,e.c|=Y}}function Be(n){let e=n.b,t;for(;e;){let i=e.e;e.c&Y?(e.g.l(e),e.e=h):(t&&(t.i=e),e.i=h,e.e=t,t=e),e.g.k=e.m,e.m&&(e.m=h),e=i}n.b=t}function Ge(n){let e=this;Be(e),d=n,ue(),e.c&=~O}var P=class{constructor(e){let t=this;t.d=0,t.a=e,t.k=h,t.f=h}o(e){let t=this;e.c&K||(e.c|=K,e.j=t.f,t.f&&(t.f.n=e),t.f=e)}l(e){let t=this,i=e.n,l=e.j;e.c&K&&(e.c&=~K,i&&(i.j=l,e.n=h),l&&(l.n=i,e.j=h),e===t.f&&(t.f=l))}subscribe(e){let t=this;return c(function(){let i=t.value,l=d;d=h;try{return e(i)}finally{d=l}})}set(e){return this.value=e}peek(){return this.a}get value(){return De(this)}set value(e){let t=this;if(e!==t.a){if(t.a=e,le>100)return;t.d++,Ie++,oe();try{for(let i=t.f;i;i=i.j)i.p.q()}finally{ue()}}}};var Z=class{constructor(e){this.r=e,this.b=h,this.h=0,this.c=ye}s(){let e=this;if(e.c&O)return;let t=e.u();try{e.r()}finally{t()}}u(){let e=this,t=d;return e.c|=O,oe(),d=e,qe(e),Ge.bind(e,t)}q(){let e=this;e.c&(ae|O)||(e.c|=ae,$||($=[]),$.push(e))}v(){let e=this;for(let t=e.b;t;t=t.e)t.g.l(t);e.c|=O,e.b=h}},j=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=h,t.h=0,!e&&p&&(t.parent=p,t.h=p.h+1,p.scopes.push(t))}run(e){let t=p;try{return p=this,e()}finally{p=t}}clear(){let e=this,t=e.scopes,i=e.cleanups;for(let l of t)l.clear(),l.parent=h;for(let l of i)l();t.length=0,i.length=0}};function R(n){return new j(n)}function q(n){D(n)&&p&&p.cleanups.push(n)}function B(n){if(L>0)return n();oe();try{return n()}finally{ue()}}function v(n){return new P(n)}function c(n){let e=new Z(n),t=e.v.bind(e);try{e.s()}catch(i){throw t(),i}return p&&e.b&&(e.h=p.h,p.cleanups.push(t)),t}var Ue=!1,Ve=1;var H=null,ce=Oe(),X=class extends HTMLElement{$m=!1;$c=R(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,i=e.constructor.$d;for(let l in i){let s=i[l];t[s]=v(ce)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,i=e.constructor.$s,l=e.$c,s=e.$h,a=e.shadowRoot,r=!1;a||(a=e.attachShadow({mode:"open"}),r=!0);let o=H;try{if(H=e,l.run(()=>t(a,e)),document.adoptedStyleSheets)r&&(a.adoptedStyleSheets=i);else for(let u of i)w(a,u.cloneNode(!0));for(let u of s){let f=u();D(f)&&l.cleanups.push(f)}s.length=0}finally{H=o}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,i){let l=this,s=l.constructor.$d;e in s&&(l.$p[s[e]].value=i===""?!0:i)}};function G(n,e,t,i){let l=[],s=Q.create(null);class a extends X{static observedAttributes=l;static $c=e;static $a=s;static $d=t;static $s=i}for(let r in t){let o=t[r],u=_e(r);s[u]=r,l.push(u),Q.defineProperty(a.prototype,r,{get(){return this.$p[o].a},set(f){this.$p[o].value=f}})}return Ue&&(n="velvet-"+Ve++),n&&customElements.define(n,a),a}function M(n,e){let t=H.$p[n];return t.value===ce&&(t.value=D(e)?e():e),t}function te(n){D(n)&&H.$h.push(n)}function fe(n,e){let t=document.createTextNode("");n.nodeType===1?w(n,t):N(n,t,!1),c(()=>t.data=e())}function be(n,e){let t=R(),i,l;c(()=>{let s=e();s!==i&&(l&&(t.clear(),we(n,l),l=null),i=s,s&&(l=t.run(()=>s(n))))})}function ge(n,e,t){let i=[],l=p.h+1;c(()=>{let s=t(),a=0,r=s.length,o=i.length;for(;a<r;a++)if(i[a]){let u=i[a][2];u.value=s[a]}else{let u=i[a-1],f=u?u[1]:n,y=v(s[a]),_=R(!0);_.h=l,i[a]=[_,_.run(()=>e(f,y,a)),y]}if(o>r){let u=i[a-1],f=u?u[1]:n,y=i[o-1][1];for(;a<o;a++)i[a][0].clear();we(f,y),i.length=r}}),q(()=>{for(let s=0,a=i.length;s<a;s++)i[s][0].clear()})}function we(n,e){se(n.nextSibling,e)}var Xe=C("<div><!></div>"),We=C("<span class=label> <!>, <!> </span>");function et(n,e){let t=M(0,!1),i=M(1,0),l=M(2,0),s=M(3,!1),a=M(4,()=>{}),r=T(Xe),o=x(r,[0,0]),u=x(r,[0]),f=y=>{let _=T(We),V=x(_,[0,1]),F=x(_,[0,3]),z=x(_,[0]);return fe(V,()=>i.value),fe(F,()=>l.value),I(y,_),z};be(o,()=>t.value?f:null),re(u,"class","cursor"),c(()=>W(u,"big",s.value)),c(()=>W(u,"label",t.value)),c(()=>ee(u,"border-color",a.value)),c(()=>ee(u,"transform",`translate(${i.value}px, ${l.value}px) scale(${s.value?2:1})`)),w(n,r)}var U=G("x-cursor",et,{label:0,x:1,y:2,big:3,color:4},[]);var tt=C("<div class=main><x></x></div>"),nt=C("<x></x>");function it(n,e){let l=v(0),s=v(0),a=v(!1),r=v(0),o=v(!1),u=v([]);c(()=>{let g=500+Math.round(Math.sin(r.value/90*2*Math.PI)*500*.5),k=[];for(let S=g;S--;){let b=S/g*6,J=b*2*Math.PI,ve=20+S*2,Ae=(b*255+r.value*10)%255;k[S]={color:`hsl(${Ae}, 100%, 50%)`,x:l.value+Math.sin(J)*ve|0,y:s.value+Math.cos(J)*ve|0}}u.value=k});let f={timeout:!1,x:0,y:0};function y(g){f.x=g.x,f.y=g.y,f.timeout||(f.timeout=!0,requestAnimationFrame(()=>B(()=>{f.timeout=!1,l.value=f.x,s.value=f.y})))}function _(){a.value=!0}function V(g){a.value=!1}function F(){o.value||(r.value++,requestAnimationFrame(F))}te(()=>(window.addEventListener("pointermove",y),window.addEventListener("pointerdown",_),window.addEventListener("pointerup",V),requestAnimationFrame(F),()=>{window.removeEventListener("pointermove",y),window.removeEventListener("pointerdown",_),window.removeEventListener("pointerup",V),o.value=!0}));let z=T(tt),E=new U,Ne=x(z,[0,0]),Re=(g,k)=>{let S=T(nt),b=new U,J=x(S,[0]);return c(()=>b.color=k.value.color),c(()=>b.x=k.value.x),c(()=>b.y=k.value.y),c(()=>b.big=a.value),N(J,b,!0),I(g,S),b};e:E.label=!0;c(()=>E.x=l.value),c(()=>E.y=s.value),c(()=>E.big=a.value),N(Ne,E,!0),ge(E,Re,()=>u.value),w(n,z)}var he=G("x-spiral",it,{},[]);var ie=100,Se=function(){function n(e,t,i,l){this.min=e,this.max=t,this.mean=i,this.last=l}return n}(),de=function(){function n(e){this.samples=[],this.maxSamples=e,this._i=-1}return n.prototype.addSample=function(e){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=e},n.prototype.each=function(e){for(var t=this.samples,i=0;i<t.length;i++)e(t[(this._i+1+i)%t.length],i)},n.prototype.calc=function(){var e=this.samples;if(e.length===0)return new Se(0,0,0,0);for(var t=e[(this._i+1)%e.length],i=t,l=0,s=0;s<e.length;s++){var a=e[(this._i+1+s)%e.length];a<t&&(t=a),a>i&&(i=a),l+=a}var r=e[this._i],o=l/e.length;return new Se(t,i,o,r)},n}(),at=function(){function n(){this.value=0,this.onChange=null}return n.prototype.inc=function(e){e>0&&(this.value+=e,this.onChange())},n}(),lt=function(){function n(e,t){this.value=t,this.next=null}return n}(),st=function(){function n(e){var t=this;this._dec=function(){for(var i=performance.now();t._firstTimestamp!==null;){var l=t._firstTimestamp;if(i>=l.value)t.value-=l.value,t._firstTimestamp=t._firstTimestamp.next;else{setTimeout(t._dec,Math.ceil(l.value-i));break}}t._firstTimestamp===null&&(t._lastTimestamp=null),t.onChange()},this.interval=e,this.value=0,this.onChange=null,this._firstTimestamp=null,this._lastTimestamp=null}return n.prototype.inc=function(e){if(e>0){var t=new lt(performance.now()+this.interval,e);this._firstTimestamp===null?(this._firstTimestamp=t,setTimeout(this._dec,this.interval)):this._lastTimestamp.next=t,this._lastTimestamp=t,this.value+=e,this.onChange()}},n}(),pe=[],Ce=-1;function rt(n){pe.push(n),Ce===-1&&requestAnimationFrame(function(e){Ce=-1;var t=pe;pe=[];for(var i=0;i<t.length;i++)t[i]()})}var Me=function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ne=30,Te=ie,Ee=function(){function n(e){var t=this;this._sync=function(){t.sync(),t._dirty=!1},this.name=e,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return n.prototype.invalidate=function(){this._dirty||(this._dirty=!0,rt(this._sync))},n.prototype.sync=function(){throw new Error("sync method not implemented")},n}(),m;(function(n){n[n.HideMin=1]="HideMin",n[n.HideMax=2]="HideMax",n[n.HideMean=4]="HideMean",n[n.HideLast=8]="HideLast",n[n.HideGraph=16]="HideGraph",n[n.RoundValues=32]="RoundValues"})(m||(m={}));var me=function(n){Me(e,n);function e(t,i,l,s){var a=n.call(this,t)||this;a.flags=i,a.unitName=l,a.samples=s;var r=document.createElement("div");r.style.cssText="text-align: center",r.textContent=a.name;var o=document.createElement("div");return(i&m.HideMin)===0?(a.minText=document.createElement("div"),o.appendChild(a.minText)):a.minText=null,(i&m.HideMax)===0?(a.maxText=document.createElement("div"),o.appendChild(a.maxText)):a.maxText=null,(i&m.HideMean)===0?(a.meanText=document.createElement("div"),o.appendChild(a.meanText)):a.meanText=null,(i&m.HideLast)===0?(a.lastText=document.createElement("div"),o.appendChild(a.lastText)):a.lastText=null,a.element.appendChild(r),a.element.appendChild(o),(i&m.HideGraph)===0?(a.canvas=document.createElement("canvas"),a.canvas.style.cssText="display: block; padding: 0; margin: 0",a.canvas.width=Te,a.canvas.height=ne,a.ctx=a.canvas.getContext("2d"),a.element.appendChild(a.canvas)):(a.canvas=null,a.ctx=null),a}return e.prototype.sync=function(){var t=this,i=this.samples.calc(),l=ne/(i.max*1.2),s,a,r,o;(this.flags&m.RoundValues)===0?(s=i.min.toFixed(2),a=i.max.toFixed(2),r=i.mean.toFixed(2),o=i.last.toFixed(2)):(s=Math.round(i.min).toString(),a=Math.round(i.max).toString(),r=Math.round(i.mean).toString(),o=Math.round(i.last).toString()),this.minText!==null&&(this.minText.textContent="min: \xA0"+s+this.unitName),this.maxText!==null&&(this.maxText.textContent="max: \xA0"+a+this.unitName),this.meanText!==null&&(this.meanText.textContent="mean: "+r+this.unitName),this.lastText!==null&&(this.lastText.textContent="last: "+o+this.unitName),this.ctx!==null&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,Te,ne),this.ctx.fillStyle="#0f0",this.samples.each(function(u,f){t.ctx.fillRect(f,ne,1,-(u*l))}))},e}(Ee),ot=function(n){Me(e,n);function e(t,i){var l=n.call(this,t)||this;return l.counter=i,l.text=document.createElement("div"),l.element.appendChild(l.text),l}return e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value},e}(Ee),A=null,ut=!1;function ke(){A||(A=document.createElement("div"),A.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(A)),ut=!0}function $e(n){n===void 0&&(n=m.HideMin|m.HideMax|m.HideMean|m.RoundValues),ke();var e=new de(ie),t=new me("FPS",n,"",e);A.appendChild(t.element);var i=2/121,l=0,s=60;function a(r){l>0&&(s+=i*(1e3/(r-l)-s)),l=r,e.addSample(s),t.invalidate(),requestAnimationFrame(a)}requestAnimationFrame(a)}function He(n){if(n===void 0&&(n=m.HideMin|m.HideMean),ke(),performance.memory===void 0)return;var e=new de(ie),t=new me("Memory",n,"MB",e);A.appendChild(t.element);function i(){e.addSample(Math.round(performance.memory.usedJSHeapSize/(1024*1024))),t.invalidate(),setTimeout(i,30)}i()}var jt=function(){function n(e,t,i){this.data=new de(ie),this.widget=new me(e,i,t,this.data),this.startTime=-1}return n}();var It=function(){function n(e,t){var i=this;this.data=t===void 0?new at:new st(t),this.widget=new ot(e,this.data),this.data.onChange=function(){i.widget.invalidate()}}return n}();Pe(he);Pe(U);/[&?]perfmon=(false|off|0)\b/.test(location.search)||($e(),He());var ft=new he;document.body.appendChild(ft);function Pe(n){n.prototype.attachShadow=function(){return this.shadowRoot||Object.defineProperty(this,"shadowRoot",{value:this}),this}}
//# sourceMappingURL=index.js.map

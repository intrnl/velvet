function T(n,e){let t=document.createElement("template");if(t.innerHTML=n,e){let i=t.content,a=i.firstChild,s;for(a.remove();s=a.firstChild;)i.appendChild(s)}return t}function S(n){return document.importNode(n.content,!0)}function g(n,e){let t=n,i=0,a=e.length,s,l;for(;i<a;i++)for(s=e[i],t=t.firstChild,l=0;l<s;l++)t=t.nextSibling;return t}function L(n,e,t){if(n.replaceWith(e),t){let i;for(;i=n.firstChild;)e.appendChild(i)}}function M(n,e){n.append(e)}function j(n,e){n.after(e)}function be(n,e){let t=n;if(e.nextSibling!==n)for(;t;){let i=t;if(t=t.nextSibling,i.remove(),i===e)break}}function oe(n,e,t){n.setAttribute(e,t)}function Y(n,e,t){n.classList.toggle(e,t)}function Z(n,e,t){n.style.setProperty(e,t)}var J=Object,Ge=Symbol,qe=/\B([A-Z])/g;function we(n){return n.replace(qe,"-$1").toLowerCase()}var Ve=J.is,Ue=J.assign,D=n=>typeof n=="function";var K,O=1<<0,le=1<<1,xe=1<<2,ae=1<<3,_t=1<<4,Ce=1<<5,Be=(n,e)=>n.e-e.e,h,m,x,d=0,z,A=0,se=0,Te=0,re=0;function ue(){A++}function ce(){if(A>1){A--;return}let n,e=!1;for(;z;){let t=z.sort(Be),i=0,a=t.length;for(z=K,se++;i<a;i++){let s=t[i];if(s.c&=~le,!(s.c&ae)&&Fe(s))try{s.l()}catch(l){e||(n=l,e=!0)}}}if(se=0,A--,e)throw n}function Fe(n){let e=n.b,t=e.length,i=0,a;for(;i<t;i++)if(a=e[i],a.d>n.d||a.h())return!0;return!1}function ze(){let n=m.b;if(x){if(ge(),d>0){let e=x.length,t=0;for(n.length=d+e;t<e;t++)n[d+t]=x[t]}else n=m.b=x;if(m.c&Ce){let e=n.length,t=d;for(;t<e;t++)n[t].i(m)}}else d<m.b.length&&(ge(),n.length=d)}function ge(){let n=m.b,e=n.length,t=d;for(;t<e;t++)n[t].g(m)}function ye(n){let e=n.b,t=e.length,i=0;for(;i<t;i++)e[i].g(n);e.length=0}var N=class{constructor(e){let t=this;t.a=e,t.d=-1,t.f=[],t.m=-1}h(){return!1}i(e){this.f.push(e)}g(e){let i=this.f,a=i.indexOf(e);i.splice(a,1)}peek(){return this.a}get value(){let e=this;return m&&e.m!==re&&(e.m=re,x?x.push(e):m.b[d]===e?d++:x=[e]),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.d=++Te,se<100)){let i=t.f,a=i.length,s=0;for(ue();s<a;s++)i[s].j();ce()}}};var Q=class{constructor(e){let t=this;t.k=e,t.d=0,t.b=[],t.c=Ce,t.e=0}l(){let e=this;if(e.c&O)return;e.d=Te,e.c|=O,e.c&=~xe;let t=m,i=x,a=d;try{ue(),m=e,x=K,d=0,re++,e.k()}finally{ze(),m=t,x=i,d=a,e.c&=~O,e.c&ae&&ye(e),ce()}}j(){let e=this;e.c&(le|O)||(e.c|=xe|le,(z||=[]).push(e))}o(){let e=this;e.c|=ae,e.c&O||ye(e)}},R=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=K,t.e=0,!e&&h&&(t.parent=h,t.e=h.e+1,h.scopes.push(t))}run(e){let t=h;try{return h=this,e()}finally{h=t}}clear(){let e=this,t=e.scopes,i=e.cleanups;for(let a of t)a.clear(),a.parent=K;for(let a of i)a();t.length=0,i.length=0}};function I(n){return new R(n)}function W(n){D(n)&&h&&h.cleanups.push(n)}function ee(n){if(A>0)return n();ue();try{return n()}finally{ce()}}function _(n){return new N(n)}function f(n){let e=new Q(n),t=e.o.bind(e);try{e.l()}catch(i){throw t(),i}return h&&e.b.length>0&&(e.e=h.e,h.cleanups.push(t)),t}var Je=!1,Ke=1;var H=null,fe=Ge(),X=class extends HTMLElement{$m=!1;$c=I(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,i=e.constructor.$d;for(let a in i){let s=i[a];t[s]=_(fe)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,i=e.constructor.$s,a=e.$c,s=e.$h,l=e.shadowRoot,r=!1;l||(l=e.attachShadow({mode:"open"}),r=!0);let o=H;try{if(H=e,a.run(()=>t(l,e)),document.adoptedStyleSheets)r&&(l.adoptedStyleSheets=i);else for(let u of i)M(l,u.cloneNode(!0));for(let u of s){let c=u();D(c)&&a.cleanups.push(c)}s.length=0}finally{H=o}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,i){let a=this,s=a.constructor.$d;e in s&&(a.$p[s[e]].value=i===""?!0:i)}};function G(n,e,t,i){let a=[],s=J.create(null);class l extends X{static observedAttributes=a;static $c=e;static $a=s;static $d=t;static $s=i}for(let r in t){let o=t[r],u=we(r);s[u]=r,a.push(u),J.defineProperty(l.prototype,r,{get(){return this.$p[o].a},set(c){this.$p[o].value=c}})}return Je&&(n="velvet-"+Ke++),n&&customElements.define(n,l),l}function E(n,e){let t=H.$p[n];return t.value===fe&&(t.value=D(e)?e():e),t}function te(n){D(n)&&H.$h.push(n)}function he(n,e){let t=document.createTextNode("");n.nodeType===1?M(n,t):L(n,t,!1),f(()=>t.data=e())}function Se(n,e){let t=I(),i,a;f(()=>{let s=e();s!==i&&(a&&(t.clear(),Ee(n,a),a=null),i=s,s&&(a=t.run(()=>s(n))))})}function Me(n,e,t){let i=[],a=h.e+1;f(()=>{let s=t(),l=0,r=s.length,o=i.length;for(;l<r;l++)if(i[l]){let u=i[l][2];u.value=s[l]}else{let u=i[l-1],c=u?u[1]:n,y=_(s[l]),v=I(!0);v.e=a,i[l]=[v,v.run(()=>e(c,y,l)),y]}if(o>r){let u=i[l-1],c=u?u[1]:n,y=i[o-1][1];for(;l<o;l++)i[l][0].clear();Ee(c,y),i.length=r}}),W(()=>{for(let s=0,l=i.length;s<l;s++)i[s][0].clear()})}function Ee(n,e){be(n.nextSibling,e)}var it=T("<div><!></div>"),lt=T("<span class=label> <!>, <!> </span>");function at(n,e){let t=E(0,!1),i=E(1,0),a=E(2,0),s=E(3,!1),l=E(4),r=S(it),o=g(r,[0,0]),u=g(r,[0]),c=y=>{let v=S(lt),V=g(v,[0,1]),U=g(v,[0,3]),B=g(v,[0]);return he(V,()=>i.value),he(U,()=>a.value),j(y,v),B};Se(o,()=>t.value?c:null),oe(u,"class","cursor"),f(()=>Y(u,"big",s.value)),f(()=>Y(u,"label",t.value)),f(()=>Z(u,"border-color",l.value)),f(()=>Z(u,"transform",`translate(${i.value}px, ${a.value}px) scale(${s.value?2:1})`)),M(n,r)}var q=G("x-cursor",at,{label:0,x:1,y:2,big:3,color:4},[]);var st=T("<div class=main><x></x></div>"),rt=T("<x></x>");function ot(n,e){let a=_(0),s=_(0),l=_(!1),r=_(0),o=_(!1),u=_([]);f(()=>{let w=500+Math.round(Math.sin(r.value/90*2*Math.PI)*500*.5),k=[];for(let C=w;C--;){let b=C/w*6,F=b*2*Math.PI,_e=20+C*2,Ie=(b*255+r.value*10)%255;k[C]={color:`hsl(${Ie}, 100%, 50%)`,x:a.value+Math.sin(F)*_e|0,y:s.value+Math.cos(F)*_e|0}}u.value=k});let c={timeout:!1,x:0,y:0};function y(w){c.x=w.x,c.y=w.y,c.timeout||(c.timeout=!0,requestAnimationFrame(()=>ee(()=>{c.timeout=!1,a.value=c.x,s.value=c.y})))}function v(){l.value=!0}function V(w){l.value=!1}function U(){o.value||(r.value++,requestAnimationFrame(U))}te(()=>(window.addEventListener("pointermove",y),window.addEventListener("pointerdown",v),window.addEventListener("pointerup",V),requestAnimationFrame(U),()=>{window.removeEventListener("pointermove",y),window.removeEventListener("pointerdown",v),window.removeEventListener("pointerup",V),o.value=!0}));let B=S(st),$=new q,je=g(B,[0,0]),De=(w,k)=>{let C=S(rt),b=new q,F=g(C,[0]);return f(()=>b.color=k.value.color),f(()=>b.x=k.value.x),f(()=>b.y=k.value.y),f(()=>b.big=l.value),L(F,b,!0),j(w,C),b};e:$.label=!0;f(()=>$.x=a.value),f(()=>$.y=s.value),f(()=>$.big=l.value),L(je,$,!0),Me($,De,()=>u.value),M(n,B)}var pe=G("x-spiral",ot,{},[]);var ie=100,$e=function(){function n(e,t,i,a){this.min=e,this.max=t,this.mean=i,this.last=a}return n}(),me=function(){function n(e){this.samples=[],this.maxSamples=e,this._i=-1}return n.prototype.addSample=function(e){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=e},n.prototype.each=function(e){for(var t=this.samples,i=0;i<t.length;i++)e(t[(this._i+1+i)%t.length],i)},n.prototype.calc=function(){var e=this.samples;if(e.length===0)return new $e(0,0,0,0);for(var t=e[(this._i+1)%e.length],i=t,a=0,s=0;s<e.length;s++){var l=e[(this._i+1+s)%e.length];l<t&&(t=l),l>i&&(i=l),a+=l}var r=e[this._i],o=a/e.length;return new $e(t,i,o,r)},n}(),ut=function(){function n(){this.value=0,this.onChange=null}return n.prototype.inc=function(e){e>0&&(this.value+=e,this.onChange())},n}(),ct=function(){function n(e,t){this.value=t,this.next=null}return n}(),ft=function(){function n(e){var t=this;this._dec=function(){for(var i=performance.now();t._firstTimestamp!==null;){var a=t._firstTimestamp;if(i>=a.value)t.value-=a.value,t._firstTimestamp=t._firstTimestamp.next;else{setTimeout(t._dec,Math.ceil(a.value-i));break}}t._firstTimestamp===null&&(t._lastTimestamp=null),t.onChange()},this.interval=e,this.value=0,this.onChange=null,this._firstTimestamp=null,this._lastTimestamp=null}return n.prototype.inc=function(e){if(e>0){var t=new ct(performance.now()+this.interval,e);this._firstTimestamp===null?(this._firstTimestamp=t,setTimeout(this._dec,this.interval)):this._lastTimestamp.next=t,this._lastTimestamp=t,this.value+=e,this.onChange()}},n}(),de=[],ke=-1;function ht(n){de.push(n),ke===-1&&requestAnimationFrame(function(e){ke=-1;var t=de;de=[];for(var i=0;i<t.length;i++)t[i]()})}var Pe=function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ne=30,He=ie,Oe=function(){function n(e){var t=this;this._sync=function(){t.sync(),t._dirty=!1},this.name=e,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return n.prototype.invalidate=function(){this._dirty||(this._dirty=!0,ht(this._sync))},n.prototype.sync=function(){throw new Error("sync method not implemented")},n}(),p;(function(n){n[n.HideMin=1]="HideMin",n[n.HideMax=2]="HideMax",n[n.HideMean=4]="HideMean",n[n.HideLast=8]="HideLast",n[n.HideGraph=16]="HideGraph",n[n.RoundValues=32]="RoundValues"})(p||(p={}));var ve=function(n){Pe(e,n);function e(t,i,a,s){var l=n.call(this,t)||this;l.flags=i,l.unitName=a,l.samples=s;var r=document.createElement("div");r.style.cssText="text-align: center",r.textContent=l.name;var o=document.createElement("div");return i&p.HideMin?l.minText=null:(l.minText=document.createElement("div"),o.appendChild(l.minText)),i&p.HideMax?l.maxText=null:(l.maxText=document.createElement("div"),o.appendChild(l.maxText)),i&p.HideMean?l.meanText=null:(l.meanText=document.createElement("div"),o.appendChild(l.meanText)),i&p.HideLast?l.lastText=null:(l.lastText=document.createElement("div"),o.appendChild(l.lastText)),l.element.appendChild(r),l.element.appendChild(o),i&p.HideGraph?(l.canvas=null,l.ctx=null):(l.canvas=document.createElement("canvas"),l.canvas.style.cssText="display: block; padding: 0; margin: 0",l.canvas.width=He,l.canvas.height=ne,l.ctx=l.canvas.getContext("2d"),l.element.appendChild(l.canvas)),l}return e.prototype.sync=function(){var t=this,i=this.samples.calc(),a=ne/(i.max*1.2),s,l,r,o;this.flags&p.RoundValues?(s=Math.round(i.min).toString(),l=Math.round(i.max).toString(),r=Math.round(i.mean).toString(),o=Math.round(i.last).toString()):(s=i.min.toFixed(2),l=i.max.toFixed(2),r=i.mean.toFixed(2),o=i.last.toFixed(2)),this.minText!==null&&(this.minText.textContent="min: \xA0"+s+this.unitName),this.maxText!==null&&(this.maxText.textContent="max: \xA0"+l+this.unitName),this.meanText!==null&&(this.meanText.textContent="mean: "+r+this.unitName),this.lastText!==null&&(this.lastText.textContent="last: "+o+this.unitName),this.ctx!==null&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,He,ne),this.ctx.fillStyle="#0f0",this.samples.each(function(u,c){t.ctx.fillRect(c,ne,1,-(u*a))}))},e}(Oe),pt=function(n){Pe(e,n);function e(t,i){var a=n.call(this,t)||this;return a.counter=i,a.text=document.createElement("div"),a.element.appendChild(a.text),a}return e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value},e}(Oe),P=null,dt=!1;function Ae(){P||(P=document.createElement("div"),P.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(P)),dt=!0}function Ne(n){n===void 0&&(n=p.HideMin|p.HideMax|p.HideMean|p.RoundValues),Ae();var e=new me(ie),t=new ve("FPS",n,"",e);P.appendChild(t.element);var i=2/121,a=0,s=60;function l(r){a>0&&(s+=i*(1e3/(r-a)-s)),a=r,e.addSample(s),t.invalidate(),requestAnimationFrame(l)}requestAnimationFrame(l)}function Re(n){if(n===void 0&&(n=p.HideMin|p.HideMean),Ae(),performance.memory===void 0)return;var e=new me(ie),t=new ve("Memory",n,"MB",e);P.appendChild(t.element);function i(){e.addSample(Math.round(performance.memory.usedJSHeapSize/(1024*1024))),t.invalidate(),setTimeout(i,30)}i()}var Ut=function(){function n(e,t,i){this.data=new me(ie),this.widget=new ve(e,i,t,this.data),this.startTime=-1}return n}();var Bt=function(){function n(e,t){var i=this;this.data=t===void 0?new ut:new ft(t),this.widget=new pt(e,this.data),this.data.onChange=function(){i.widget.invalidate()}}return n}();Le(pe);Le(q);/[&?]perfmon=(false|off|0)\b/.test(location.search)||(Ne(),Re());var vt=new pe;document.body.appendChild(vt);function Le(n){n.prototype.attachShadow=function(){return this.shadowRoot||Object.defineProperty(this,"shadowRoot",{value:this}),this}}
//# sourceMappingURL=index.js.map

var xe=Object,Be=Symbol,Ge=/\B([A-Z])/g;function be(n){return n.replace(Ge,"-$1").toLowerCase()}var U=n=>typeof n=="function";var Y,I=1,se=2,ge=4,ae=8;var Ce=32,qe=(n,e)=>n.e-e.e,d,p,y,v=0,J,B=0,re=0,Se=0,Ue=0;function oe(){B++}function ue(){if(B>1){B--;return}let n,e=!1;for(;J;){let t=J.sort(qe),i=0,l=t.length;for(J=Y,re++;i<l;i++){let a=t[i];if(a.a&=~se,!(a.a&ae)&&Ve(a))try{a.f()}catch(s){e||(n=s,e=!0)}}}if(re=0,B--,e)throw n}function Ve(n){let e=n.b,t=e.length,i=0,l;for(;i<t;i++)if(l=e[i],l.d>n.d||l.f())return!0;return!1}function Fe(){let n=p.b;if(y){if(ye(),v>0){let i=y.length,l=0;for(n.length=v+i;l<i;l++)n[v+l]=y[l]}else n=p.b=y;let e=n.length,t=v;for(;t<e;t++){let i=n[t];p.a&Ce&&i.k(p)}}else v<p.b.length&&(ye(),n.length=v)}function ye(){let n=p.b,e=n.length,t=v;for(;t<e;t++)n[t].i(p)}function we(n){let e=n.b,t=e.length,i=0;for(;i<t;i++)e[i].i(n);e.length=0}var G=class{d=-1;g=-1;h=[];c;constructor(e){let t=this;t.c=e}f(){return!1}k(e){this.h.push(e)}i(e){let i=this.h,l=i.indexOf(e);i.splice(l,1)}peek(){return this.c}get value(){let e=this;return p&&p.g!==e.g&&(e.g=p.g,y?y.push(e):p.b[v]===e?v++:y=[e]),e.c}set value(e){let t=this;if(t.c!==e&&(t.c=e,t.d=++Se,re<100)){let i=t.h,l=i.length,a=0;for(oe();a<l;a++)i[a].l();ue()}}};var Z=class{d=0;g=0;b=[];a=Ce;e=0;j;constructor(e){let t=this;t.j=e}f(){let e=this,t=e.a;if(t&I)return;e.d=Se,e.g=Ue++,e.a=t&~ge|I;let i=p,l=y,a=v;try{oe(),p=e,y=Y,v=0,e.j()}finally{Fe(),p=i,y=l,v=a,e.a&=~I,e.a&ae&&we(e),ue()}}l(){let e=this;e.a&(se|I)||(e.a|=ge|se,(J||=[]).push(e))}n(){let e=this;e.a|=ae,e.a&I||we(e)}},q=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=Y,t.e=0,!e&&d&&(t.parent=d,t.e=d.e+1,d.scopes.push(t))}run(e){let t=d;try{return d=this,e()}finally{d=t}}clear(){let e=this,t=e.scopes,i=e.cleanups;for(let l of t)l.clear(),l.parent=Y;for(let l of i)l();t.length=0,i.length=0}};function N(n){return new q(n)}function X(n){U(n)&&d&&d.cleanups.push(n)}function W(n){if(B>0)return n();oe();try{return n()}finally{ue()}}function x(n){return new G(n)}function f(n){let e=new Z(n),t=e.n.bind(e);try{e.f()}catch(i){throw t(),i}return d&&e.b.length>0&&(e.e=d.e,d.cleanups.push(t)),t}var ze=!1,Ke=1;var A=null,ce=Be(),Q=class extends HTMLElement{$m=!1;$c=N(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,i=e.constructor.$d;for(let l in i){let a=i[l];t[a]=x(ce)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,i=e.constructor.$s,l=e.$c,a=e.$h,s=e.shadowRoot;s||(s=e.attachShadow({mode:"open"}),s.adoptedStyleSheets=i);let o=A;try{A=e,l.run(()=>t(s,e));for(let r=0,h=a.length;r<h;r++){let c=a[r],u=c();U(u)&&l.cleanups.push(u)}a.length=0}finally{A=o}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,i){let l=this,a=l.constructor.$d;e in a&&(l.$p[a[e]].value=i===""?!0:i)}};function V(n,e,t,i){let l=[],a=xe.create(null);class s extends Q{static observedAttributes=l;static $c=e;static $a=a;static $d=t;static $s=i}for(let o in t){let r=t[o],h=be(o);a[h]=o,l.push(h),xe.defineProperty(s.prototype,o,{get(){return this.$p[r].c},set(c){this.$p[r].value=c}})}return ze&&(n="velvet-"+Ke++),n&&customElements.define(n,s),s}function M(n,e){let t=A.$p[n];return t.value===ce&&(t.value=U(e)?e():e),t}function ee(n){U(n)&&A.$h.push(n)}function E(n,e){let t=document.createElement("template");if(t.innerHTML=n,e){let i=t.content,l=i.firstChild,a;for(l.remove();a=l.firstChild;)i.appendChild(a)}return t}function $(n){return document.importNode(n.content,!0)}function w(n){return n.firstChild}function L(n){return n.nextSibling}function k(n,e,t){if(n.replaceWith(e),t){let i;for(;i=n.firstChild;)e.appendChild(i)}}function F(n,e){n.append(e)}function z(n,e){n.after(e)}function Te(n,e){let t=n;if(e.nextSibling!==n)for(;t;){let i=t;if(t=t.nextSibling,i.remove(),i===e)break}}function te(n,e,t){n.classList.toggle(e,t)}function ne(n,e,t){n.style.setProperty(e,t)}function he(n,e,t){let i=document.createTextNode("");t(n,i),f(()=>i.data=e())}function Me(n,e){let t=N(),i,l;f(()=>{let a=e();a!==i&&(l&&(t.clear(),fe(n,l),l=null),i=a,a&&(l=t.run(()=>a(n))))})}function Ee(n,e,t,i){let l=[],a=d.a+1,s=null;f(()=>{let o=t(),r=0,h=o.length,c=l.length;if(i&&s&&h>0){let u=s[0],_=s[1];u.clear(),fe(n,_),s=null}for(;r<h;r++)if(l[r]){let u=l[r][2];u.value=o[r]}else{let u=l[r-1],_=u?u[1]:n,g=x(o[r]),S=N(!0);S.a=a,l[r]=[S,S.run(()=>e(_,g,r)),g]}if(c>h){let u=l[r-1],_=u?u[1]:n,g=l[c-1][1];for(;r<c;r++)l[r][0].clear();fe(_,g),l.length=h}if(i&&!s&&h<1){let u=N(!0);u.a=a,s=[u,u.run(()=>i(n))]}}),X(()=>{for(let o=0,r=l.length;o<r;o++)l[o][0].clear()})}function fe(n,e){Te(n.nextSibling,e)}var nt=E("<div class=cursor><!></div>"),it=E("<span class=label> <!>, <!> </span>");function lt(n,e){let t=M(0,!1),i=M(1,0),l=M(2,0),a=M(3,!1),s=M(4),o=$(nt),r=w(o),h=w(r),c=u=>{let _=$(it),g=w(_),D=L(w(g)),H=L(L(D)),P=L(H);return he(D,()=>i.value,k),he(H,()=>l.value,k),z(u,_),g};f(()=>te(r,"big",a.value)),f(()=>te(r,"label",t.value)),f(()=>ne(r,"border-color",s.value)),f(()=>ne(r,"transform",`translate(${i.value}px, ${l.value}px) scale(${a.value?2:1})`)),Me(h,()=>t.value?c:null),F(n,o)}var K=V("x-cursor",lt,{label:0,x:1,y:2,big:3,color:4},[]);var st=E("<div class=main><x></x></div>"),at=E("<x></x>");function rt(n,e){let l=x(0),a=x(0),s=x(!1),o=x(0),r=x(!1),h=x([]);f(()=>{let b=500+Math.round(Math.sin(o.value/90*2*Math.PI)*500*.5),O=[];for(let T=b;T--;){let R=T/b*6,C=R*2*Math.PI,_e=20+T*2,Ie=(R*255+o.value*10)%255;O[T]={color:`hsl(${Ie}, 100%, 50%)`,x:l.value+Math.sin(C)*_e|0,y:a.value+Math.cos(C)*_e|0}}h.value=O});let c={timeout:!1,x:0,y:0};function u(b){c.x=b.x,c.y=b.y,c.timeout||(c.timeout=!0,requestAnimationFrame(()=>W(()=>{c.timeout=!1,l.value=c.x,a.value=c.y})))}function _(){s.value=!0}function g(b){s.value=!1}function S(){r.value||(o.value++,requestAnimationFrame(S))}ee(()=>(window.addEventListener("pointermove",u),window.addEventListener("pointerdown",_),window.addEventListener("pointerup",g),requestAnimationFrame(S),()=>{window.removeEventListener("pointermove",u),window.removeEventListener("pointerdown",_),window.removeEventListener("pointerup",g),r.value=!0}));let D=$(st),H=w(w(D)),P=new K,De=(b,O)=>{let T=$(at),R=w(T),C=new K;return f(()=>C.color=O.value.color),f(()=>C.x=O.value.x),f(()=>C.y=O.value.y),f(()=>C.big=s.value),k(R,R=C,!0),z(b,T),R};P.label=!0,f(()=>P.x=l.value),f(()=>P.y=a.value),f(()=>P.big=s.value),k(H,H=P,!0),Ee(H,De,()=>h.value),F(n,D)}var de=V("x-spiral",rt,{},[]);var le=100,$e=function(){function n(e,t,i,l){this.min=e,this.max=t,this.mean=i,this.last=l}return n}(),me=function(){function n(e){this.samples=[],this.maxSamples=e,this._i=-1}return n.prototype.addSample=function(e){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=e},n.prototype.each=function(e){for(var t=this.samples,i=0;i<t.length;i++)e(t[(this._i+1+i)%t.length],i)},n.prototype.calc=function(){var e=this.samples;if(e.length===0)return new $e(0,0,0,0);for(var t=e[(this._i+1)%e.length],i=t,l=0,a=0;a<e.length;a++){var s=e[(this._i+1+a)%e.length];s<t&&(t=s),s>i&&(i=s),l+=s}var o=e[this._i],r=l/e.length;return new $e(t,i,r,o)},n}(),ot=function(){function n(){this.value=0,this.onChange=null}return n.prototype.inc=function(e){e>0&&(this.value+=e,this.onChange())},n}(),ut=function(){function n(e,t){this.value=t,this.next=null}return n}(),ct=function(){function n(e){var t=this;this._dec=function(){for(var i=performance.now();t._firstTimestamp!==null;){var l=t._firstTimestamp;if(i>=l.value)t.value-=l.value,t._firstTimestamp=t._firstTimestamp.next;else{setTimeout(t._dec,Math.ceil(l.value-i));break}}t._firstTimestamp===null&&(t._lastTimestamp=null),t.onChange()},this.interval=e,this.value=0,this.onChange=null,this._firstTimestamp=null,this._lastTimestamp=null}return n.prototype.inc=function(e){if(e>0){var t=new ut(performance.now()+this.interval,e);this._firstTimestamp===null?(this._firstTimestamp=t,setTimeout(this._dec,this.interval)):this._lastTimestamp.next=t,this._lastTimestamp=t,this.value+=e,this.onChange()}},n}(),pe=[],ke=-1;function ft(n){pe.push(n),ke===-1&&requestAnimationFrame(function(e){ke=-1;var t=pe;pe=[];for(var i=0;i<t.length;i++)t[i]()})}var Pe=function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ie=30,He=le,Oe=function(){function n(e){var t=this;this._sync=function(){t.sync(),t._dirty=!1},this.name=e,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return n.prototype.invalidate=function(){this._dirty||(this._dirty=!0,ft(this._sync))},n.prototype.sync=function(){throw new Error("sync method not implemented")},n}(),m;(function(n){n[n.HideMin=1]="HideMin",n[n.HideMax=2]="HideMax",n[n.HideMean=4]="HideMean",n[n.HideLast=8]="HideLast",n[n.HideGraph=16]="HideGraph",n[n.RoundValues=32]="RoundValues"})(m||(m={}));var ve=function(n){Pe(e,n);function e(t,i,l,a){var s=n.call(this,t)||this;s.flags=i,s.unitName=l,s.samples=a;var o=document.createElement("div");o.style.cssText="text-align: center",o.textContent=s.name;var r=document.createElement("div");return i&m.HideMin?s.minText=null:(s.minText=document.createElement("div"),r.appendChild(s.minText)),i&m.HideMax?s.maxText=null:(s.maxText=document.createElement("div"),r.appendChild(s.maxText)),i&m.HideMean?s.meanText=null:(s.meanText=document.createElement("div"),r.appendChild(s.meanText)),i&m.HideLast?s.lastText=null:(s.lastText=document.createElement("div"),r.appendChild(s.lastText)),s.element.appendChild(o),s.element.appendChild(r),i&m.HideGraph?(s.canvas=null,s.ctx=null):(s.canvas=document.createElement("canvas"),s.canvas.style.cssText="display: block; padding: 0; margin: 0",s.canvas.width=He,s.canvas.height=ie,s.ctx=s.canvas.getContext("2d"),s.element.appendChild(s.canvas)),s}return e.prototype.sync=function(){var t=this,i=this.samples.calc(),l=ie/(i.max*1.2),a,s,o,r;this.flags&m.RoundValues?(a=Math.round(i.min).toString(),s=Math.round(i.max).toString(),o=Math.round(i.mean).toString(),r=Math.round(i.last).toString()):(a=i.min.toFixed(2),s=i.max.toFixed(2),o=i.mean.toFixed(2),r=i.last.toFixed(2)),this.minText!==null&&(this.minText.textContent="min: \xA0"+a+this.unitName),this.maxText!==null&&(this.maxText.textContent="max: \xA0"+s+this.unitName),this.meanText!==null&&(this.meanText.textContent="mean: "+o+this.unitName),this.lastText!==null&&(this.lastText.textContent="last: "+r+this.unitName),this.ctx!==null&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,He,ie),this.ctx.fillStyle="#0f0",this.samples.each(function(h,c){t.ctx.fillRect(c,ie,1,-(h*l))}))},e}(Oe),ht=function(n){Pe(e,n);function e(t,i){var l=n.call(this,t)||this;return l.counter=i,l.text=document.createElement("div"),l.element.appendChild(l.text),l}return e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value},e}(Oe),j=null,dt=!1;function Re(){j||(j=document.createElement("div"),j.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(j)),dt=!0}function Ae(n){n===void 0&&(n=m.HideMin|m.HideMax|m.HideMean|m.RoundValues),Re();var e=new me(le),t=new ve("FPS",n,"",e);j.appendChild(t.element);var i=2/121,l=0,a=60;function s(o){l>0&&(a+=i*(1e3/(o-l)-a)),l=o,e.addSample(a),t.invalidate(),requestAnimationFrame(s)}requestAnimationFrame(s)}function Ne(n){if(n===void 0&&(n=m.HideMin|m.HideMean),Re(),performance.memory===void 0)return;var e=new me(le),t=new ve("Memory",n,"MB",e);j.appendChild(t.element);function i(){e.addSample(Math.round(performance.memory.usedJSHeapSize/(1024*1024))),t.invalidate(),setTimeout(i,30)}i()}var Ft=function(){function n(e,t,i){this.data=new me(le),this.widget=new ve(e,i,t,this.data),this.startTime=-1}return n}();var zt=function(){function n(e,t){var i=this;this.data=t===void 0?new ot:new ct(t),this.widget=new ht(e,this.data),this.data.onChange=function(){i.widget.invalidate()}}return n}();Le(de);Le(K);/[&?]perfmon=(false|off|0)\b/.test(location.search)||(Ae(),Ne());var mt=new de;document.body.appendChild(mt);function Le(n){n.prototype.attachShadow=function(){return this.shadowRoot||Object.defineProperty(this,"shadowRoot",{value:this}),this}}
//# sourceMappingURL=index.js.map

function C(n,e){let t=document.createElement("template");if(t.innerHTML=n,e){let i=t.content,s=i.childNodes[0],l=s.childNodes,a=l.length;for(s.remove();a--;)i.appendChild(l[0])}return t}function S(n){return document.importNode(n.content,!0)}function x(n,e){let t=n,i=0,s=e.length,l,a;for(;i<s;i++)for(l=e[i],t=t.firstChild,a=0;a<l;a++)t=t.nextSibling;return t}function P(n,e,t){if(n.replaceWith(e),t){let i=n.childNodes,s=i.length;for(;s--;)e.appendChild(i[0])}}function w(n,e){n.append(e)}function D(n,e){n.after(e)}function se(n,e){let t=n;if(e.nextSibling!==n)for(;t;){let i=t;if(t=t.nextSibling,i.remove(),i===e)break}}function le(n,e,t){n.setAttribute(e,t)}function Z(n,e,t){n.classList.toggle(e,t)}function W(n,e,t){n.style.setProperty(e,t)}var Q=Object,je=Symbol,Le=/\B([A-Z])/g;function ve(n){return n.replace(Le,"-$1").toLowerCase()}var _e=Q.is,De=Q.assign,I=n=>typeof n=="function";var h,O=1<<0,ie=1<<1,dt=1<<2,R=1<<3,mt=1<<4,xe=1<<5,d,p,K,j=0,ae=0,Ie=0;function re(){j++}function oe(){if(j>1){j--;return}let n,e=!1;for(;K;){let t=K.sort((l,a)=>l.i-a.i),i=0,s=t.length;for(K=h,ae++;i<s;i++){let l=t[i];if(l.c&=~ie,!(l.c&R)&&Ge(l))try{l.t()}catch(a){e||(n=a,e=!0)}}}if(ae=0,j--,e)throw n}function qe(n){if(!p)return h;let e=n.k;return!e||e.q!==p?(e={d:0,n:e,g:n,h,e:p.b,q:p,l:h,j:h},p.b=e,n.k=e,p.c&xe&&n.o(e),e):e.d===-1?(e.d=0,e.h&&(e.h.e=e.e,e.e&&(e.e.h=e.h),e.h=h,e.e=p.b,p.b.h=e,p.b=e),e):h}function Ge(n){for(let e=n.b;e;e=e.e)if(e.g.d!==e.d||!e.g.p()||e.g.d!==e.d)return!0;return!1}function Ve(n){for(let e=n.b;e;e=e.e){let t=e.g.k;t&&(e.n=t),e.g.k=e,e.d=-1}}function ye(n){let e=h,t=n.b;for(;t;){let i=t.e;t.d===-1?(t.g.m(t),t.e=h):(e&&(e.h=t),t.h=h,t.e=e,e=t),t.g.k=t.n,t.n&&(t.n=h),t=i}n.b=e}function be(n){for(let e=n.b;e;e=e.e)e.g.m(e);n.b=h}function Ue(n){let e=this;ye(e),p=n,e.c&=~O,e.c&R&&be(e),oe()}var H=class{constructor(e){this.a=e,this.d=0,this.k=h,this.f=h}p(){return!0}o(e){let t=this;t.f!==e&&!e.l&&(e.j=t.f,t.f&&(t.f.l=e),t.f=e)}m(e){let t=this,i=e.l,s=e.j;i&&(i.j=s,e.l=h),s&&(s.l=i,e.j=h),e===t.f&&(t.f=s)}subscribe(e){let t=this;return c(()=>{let i=p,s=t.value;try{p=h,e(s)}finally{p=i}})}set(e){return this.value=e}peek(){return this.a}get value(){let e=this,t=qe(e);return t&&(t.d=e.d),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.d++,Ie++,ae<100)){re();try{for(let i=t.f;i;i=i.j)i.q.r()}finally{oe()}}}};var X=class{constructor(e){this.s=e,this.b=h,this.c=xe,this.i=0}t(){let e=this;if(e.c&(O|R))return;let t=e.v();try{e.s()}finally{t()}}v(){let e=this;e.c|=O,e.c&=~R,ye(e),Ve(e),re();let t=p;return p=e,Ue.bind(e,t)}r(){let e=this;e.c&(ie|O)||(e.c|=ie,(K||=[]).push(e))}w(){let e=this;e.c|=R,e.c&O||be(e)}},L=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=h,t.i=0,!e&&d&&(t.parent=d,t.i=d.i+1,d.scopes.push(t))}run(e){let t=d;try{return d=this,e()}finally{d=t}}clear(){let e=this,t=e.scopes,i=e.cleanups;for(let s of t)s.clear(),s.parent=h;for(let s of i)s();t.length=0,i.length=0}};function N(n){return new L(n)}function q(n){I(n)&&d&&d.cleanups.push(n)}function G(n){if(j>0)return n();re();try{return n()}finally{oe()}}function v(n){return new H(n)}function c(n){let e=new X(n),t=e.w.bind(e);try{e.t()}catch(i){throw t(),i}return d&&e.b&&(e.i=d.i,d.cleanups.push(t)),t}var Be=!1,Fe=1;var $=null,ue=je(),Y=class extends HTMLElement{$m=!1;$c=N(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,i=e.constructor.$d;for(let s in i){let l=i[s];t[l]=v(ue)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,i=e.constructor.$s,s=e.$c,l=e.$h,a=e.shadowRoot,r=!1;a||(a=e.attachShadow({mode:"open"}),r=!0);let o=$;try{if($=e,s.run(()=>t(a,e)),document.adoptedStyleSheets)r&&(a.adoptedStyleSheets=i);else for(let u of i)w(a,u.cloneNode(!0));for(let u of l){let f=u();I(f)&&s.cleanups.push(f)}l.length=0}finally{$=o}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,i){let s=this,l=s.constructor.$d;e in l&&(s.$p[l[e]].value=i===""?!0:i)}};function V(n,e,t,i){let s=[],l=Q.create(null);class a extends Y{static observedAttributes=s;static $c=e;static $a=l;static $d=t;static $s=i}for(let r in t){let o=t[r],u=ve(r);l[u]=r,s.push(u),Q.defineProperty(a.prototype,r,{get(){return this.$p[o].a},set(f){this.$p[o].value=f}})}return Be&&(n="velvet-"+Fe++),n&&customElements.define(n,a),a}function M(n,e){let t=$.$p[n];return t.value===ue&&(t.value=I(e)?e():e),t}function ee(n){I(n)&&$.$h.push(n)}function ce(n,e){let t=document.createTextNode("");n.nodeType===1?w(n,t):P(n,t,!1),c(()=>t.data=e())}function ge(n,e){let t=N(),i,s;c(()=>{let l=e();l!==i&&(s&&(t.clear(),Te(n,s),s=null),i=l,l&&(s=t.run(()=>l(n))))})}function we(n,e,t){let i=[],s=d.i+1;c(()=>{let l=t(),a=0,r=l.length,o=i.length;for(;a<r;a++)if(i[a]){let u=i[a][2];u.value=l[a]}else{let u=i[a-1],f=u?u[1]:n,y=v(l[a]),_=N(!0);_.i=s,i[a]=[_,_.run(()=>e(f,y,a)),y]}if(o>r){let u=i[a-1],f=u?u[1]:n,y=i[o-1][1];for(;a<o;a++)i[a][0].clear();Te(f,y),i.length=r}}),q(()=>{for(let l=0,a=i.length;l<a;l++)i[l][0].clear()})}function Te(n,e){se(n.nextSibling,e)}var et=C("<div><!></div>"),tt=C("<span class=label> <!>, <!> </span>");function nt(n,e){let t=M(0,!1),i=M(1,0),s=M(2,0),l=M(3,!1),a=M(4),r=S(et),o=x(r,[0,0]),u=x(r,[0]),f=y=>{let _=S(tt),B=x(_,[0,1]),F=x(_,[0,3]),z=x(_,[0]);return ce(B,()=>i.value),ce(F,()=>s.value),D(y,_),z};ge(o,()=>t.value?f:null),le(u,"class","cursor"),c(()=>Z(u,"big",l.value)),c(()=>Z(u,"label",t.value)),c(()=>W(u,"border-color",a.value)),c(()=>W(u,"transform",`translate(${i.value}px, ${s.value}px) scale(${l.value?2:1})`)),w(n,r)}var U=V("x-cursor",nt,{label:0,x:1,y:2,big:3,color:4},[]);var it=C("<div class=main><x></x></div>"),at=C("<x></x>");function st(n,e){let s=v(0),l=v(0),a=v(!1),r=v(0),o=v(!1),u=v([]);c(()=>{let g=500+Math.round(Math.sin(r.value/90*2*Math.PI)*500*.5),k=[];for(let T=g;T--;){let b=T/g*6,J=b*2*Math.PI,me=20+T*2,Re=(b*255+r.value*10)%255;k[T]={color:`hsl(${Re}, 100%, 50%)`,x:s.value+Math.sin(J)*me|0,y:l.value+Math.cos(J)*me|0}}u.value=k});let f={timeout:!1,x:0,y:0};function y(g){f.x=g.x,f.y=g.y,f.timeout||(f.timeout=!0,requestAnimationFrame(()=>G(()=>{f.timeout=!1,s.value=f.x,l.value=f.y})))}function _(){a.value=!0}function B(g){a.value=!1}function F(){o.value||(r.value++,requestAnimationFrame(F))}ee(()=>(window.addEventListener("pointermove",y),window.addEventListener("pointerdown",_),window.addEventListener("pointerup",B),requestAnimationFrame(F),()=>{window.removeEventListener("pointermove",y),window.removeEventListener("pointerdown",_),window.removeEventListener("pointerup",B),o.value=!0}));let z=S(it),E=new U,Ae=x(z,[0,0]),Oe=(g,k)=>{let T=S(at),b=new U,J=x(T,[0]);return c(()=>b.color=k.value.color),c(()=>b.x=k.value.x),c(()=>b.y=k.value.y),c(()=>b.big=a.value),P(J,b,!0),D(g,T),b};e:E.label=!0;c(()=>E.x=s.value),c(()=>E.y=l.value),c(()=>E.big=a.value),P(Ae,E,!0),we(E,Oe,()=>u.value),w(n,z)}var fe=V("x-spiral",st,{},[]);var ne=100,Ce=function(){function n(e,t,i,s){this.min=e,this.max=t,this.mean=i,this.last=s}return n}(),pe=function(){function n(e){this.samples=[],this.maxSamples=e,this._i=-1}return n.prototype.addSample=function(e){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=e},n.prototype.each=function(e){for(var t=this.samples,i=0;i<t.length;i++)e(t[(this._i+1+i)%t.length],i)},n.prototype.calc=function(){var e=this.samples;if(e.length===0)return new Ce(0,0,0,0);for(var t=e[(this._i+1)%e.length],i=t,s=0,l=0;l<e.length;l++){var a=e[(this._i+1+l)%e.length];a<t&&(t=a),a>i&&(i=a),s+=a}var r=e[this._i],o=s/e.length;return new Ce(t,i,o,r)},n}(),lt=function(){function n(){this.value=0,this.onChange=null}return n.prototype.inc=function(e){e>0&&(this.value+=e,this.onChange())},n}(),rt=function(){function n(e,t){this.value=t,this.next=null}return n}(),ot=function(){function n(e){var t=this;this._dec=function(){for(var i=performance.now();t._firstTimestamp!==null;){var s=t._firstTimestamp;if(i>=s.value)t.value-=s.value,t._firstTimestamp=t._firstTimestamp.next;else{setTimeout(t._dec,Math.ceil(s.value-i));break}}t._firstTimestamp===null&&(t._lastTimestamp=null),t.onChange()},this.interval=e,this.value=0,this.onChange=null,this._firstTimestamp=null,this._lastTimestamp=null}return n.prototype.inc=function(e){if(e>0){var t=new rt(performance.now()+this.interval,e);this._firstTimestamp===null?(this._firstTimestamp=t,setTimeout(this._dec,this.interval)):this._lastTimestamp.next=t,this._lastTimestamp=t,this.value+=e,this.onChange()}},n}(),he=[],Se=-1;function ut(n){he.push(n),Se===-1&&requestAnimationFrame(function(e){Se=-1;var t=he;he=[];for(var i=0;i<t.length;i++)t[i]()})}var Ee=function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),te=30,Me=ne,ke=function(){function n(e){var t=this;this._sync=function(){t.sync(),t._dirty=!1},this.name=e,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return n.prototype.invalidate=function(){this._dirty||(this._dirty=!0,ut(this._sync))},n.prototype.sync=function(){throw new Error("sync method not implemented")},n}(),m;(function(n){n[n.HideMin=1]="HideMin",n[n.HideMax=2]="HideMax",n[n.HideMean=4]="HideMean",n[n.HideLast=8]="HideLast",n[n.HideGraph=16]="HideGraph",n[n.RoundValues=32]="RoundValues"})(m||(m={}));var de=function(n){Ee(e,n);function e(t,i,s,l){var a=n.call(this,t)||this;a.flags=i,a.unitName=s,a.samples=l;var r=document.createElement("div");r.style.cssText="text-align: center",r.textContent=a.name;var o=document.createElement("div");return(i&m.HideMin)===0?(a.minText=document.createElement("div"),o.appendChild(a.minText)):a.minText=null,(i&m.HideMax)===0?(a.maxText=document.createElement("div"),o.appendChild(a.maxText)):a.maxText=null,(i&m.HideMean)===0?(a.meanText=document.createElement("div"),o.appendChild(a.meanText)):a.meanText=null,(i&m.HideLast)===0?(a.lastText=document.createElement("div"),o.appendChild(a.lastText)):a.lastText=null,a.element.appendChild(r),a.element.appendChild(o),(i&m.HideGraph)===0?(a.canvas=document.createElement("canvas"),a.canvas.style.cssText="display: block; padding: 0; margin: 0",a.canvas.width=Me,a.canvas.height=te,a.ctx=a.canvas.getContext("2d"),a.element.appendChild(a.canvas)):(a.canvas=null,a.ctx=null),a}return e.prototype.sync=function(){var t=this,i=this.samples.calc(),s=te/(i.max*1.2),l,a,r,o;(this.flags&m.RoundValues)===0?(l=i.min.toFixed(2),a=i.max.toFixed(2),r=i.mean.toFixed(2),o=i.last.toFixed(2)):(l=Math.round(i.min).toString(),a=Math.round(i.max).toString(),r=Math.round(i.mean).toString(),o=Math.round(i.last).toString()),this.minText!==null&&(this.minText.textContent="min: \xA0"+l+this.unitName),this.maxText!==null&&(this.maxText.textContent="max: \xA0"+a+this.unitName),this.meanText!==null&&(this.meanText.textContent="mean: "+r+this.unitName),this.lastText!==null&&(this.lastText.textContent="last: "+o+this.unitName),this.ctx!==null&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,Me,te),this.ctx.fillStyle="#0f0",this.samples.each(function(u,f){t.ctx.fillRect(f,te,1,-(u*s))}))},e}(ke),ct=function(n){Ee(e,n);function e(t,i){var s=n.call(this,t)||this;return s.counter=i,s.text=document.createElement("div"),s.element.appendChild(s.text),s}return e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value},e}(ke),A=null,ft=!1;function $e(){A||(A=document.createElement("div"),A.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(A)),ft=!0}function He(n){n===void 0&&(n=m.HideMin|m.HideMax|m.HideMean|m.RoundValues),$e();var e=new pe(ne),t=new de("FPS",n,"",e);A.appendChild(t.element);var i=2/121,s=0,l=60;function a(r){s>0&&(l+=i*(1e3/(r-s)-l)),s=r,e.addSample(l),t.invalidate(),requestAnimationFrame(a)}requestAnimationFrame(a)}function Pe(n){if(n===void 0&&(n=m.HideMin|m.HideMean),$e(),performance.memory===void 0)return;var e=new pe(ne),t=new de("Memory",n,"MB",e);A.appendChild(t.element);function i(){e.addSample(Math.round(performance.memory.usedJSHeapSize/(1024*1024))),t.invalidate(),setTimeout(i,30)}i()}var Gt=function(){function n(e,t,i){this.data=new pe(ne),this.widget=new de(e,i,t,this.data),this.startTime=-1}return n}();var Vt=function(){function n(e,t){var i=this;this.data=t===void 0?new lt:new ot(t),this.widget=new ct(e,this.data),this.data.onChange=function(){i.widget.invalidate()}}return n}();Ne(fe);Ne(U);/[&?]perfmon=(false|off|0)\b/.test(location.search)||(He(),Pe());var pt=new fe;document.body.appendChild(pt);function Ne(n){n.prototype.attachShadow=function(){return this.shadowRoot||Object.defineProperty(this,"shadowRoot",{value:this}),this}}
//# sourceMappingURL=index.js.map

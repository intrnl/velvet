function S(l,e){let t=document.createElement("template");if(t.innerHTML=l,e){let s=t.content,n=s.firstChild,a;for(n.remove();a=n.firstChild;)s.appendChild(a)}return t}function $(l){return document.importNode(l.content,!0)}function o(l,e){let t=l,s=0,n=e.length,a,r;for(;s<n;s++)for(a=e[s],t=t.firstChild,r=0;r<a;r++)t=t.nextSibling;return t}function ve(l,e,t){if(l.replaceWith(e),t){let s;for(;s=l.firstChild;)e.appendChild(s)}}function K(l,e){l.append(e)}function R(l,e){l.after(e)}function _e(l,e){let t=l;if(e.nextSibling!==l)for(;t;){let s=t;if(t=t.nextSibling,s.remove(),s===e)break}}function k(l,e,t,s){l.addEventListener(e,t,s)}function ne(l,e,t){l.setAttribute(e,t)}function A(l,e,t){l.classList.toggle(e,t)}var B=Object,Qe=Symbol,Ve=/\B([A-Z])/g;function ge(l){return l.replace(Ve,"-$1").toLowerCase()}var Xe=B.is,Ze=B.assign,ae=l=>typeof l=="function";var L,x=1<<0,O=1<<1,C=1<<2,le=1<<3,I=1<<4,N=1<<5,et=(l,e)=>l.e-e.e,_,p,g,h=0,M,G=0,se=0,T=0,J=0;function me(){G++}function be(){if(G>1){G--;return}let l,e=!1;for(;M;){let t=M.sort(et),s=0,n=t.length;for(M=L,se++;s<n;s++){let a=t[s];if(a.c&=~O,!(a.c&le)&&ye(a))try{a.l()}catch(r){e||(l=r,e=!0)}}}if(se=0,G--,e)throw l}function ye(l){let e=l.b,t=e.length,s=0,n;for(;s<t;s++)if(n=e[s],n.d>l.d||n.h())return!0;return!1}function xe(){let l=p.b;if(g){if(he(),h>0){let e=g.length,t=0;for(l.length=h+e;t<e;t++)l[h+t]=g[t]}else l=p.b=g;if(p.c&N){let e=l.length,t=h;for(;t<e;t++)l[t].i(p)}}else h<p.b.length&&(he(),l.length=h)}function he(){let l=p.b,e=l.length,t=h;for(;t<e;t++)l[t].g(p)}function pe(l){let e=l.b,t=e.length,s=0;for(;s<t;s++)e[s].g(l);e.length=0}var P=class{constructor(e){let t=this;t.a=e,t.d=-1,t.f=[],t.m=-1}h(){return!1}i(e){this.f.push(e)}g(e){let s=this.f,n=s.indexOf(e);s.splice(n,1)}peek(){return this.a}get value(){let e=this;return p&&e.m!==J&&(e.m=J,g?g.push(e):p.b[h]===e?h++:g=[e]),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.d=++T,se<100)){let s=t.f,n=s.length,a=0;for(me();a<n;a++)s[a].j();be()}}},U=class extends P{constructor(e){super();let t=this;t.k=e,t.b=[],t.c=C,t.n=-1}h(){let e=this;if(e.c&=~O,e.c&x||(e.c&(C|N))===N||(e.c&=~C,e.n===T))return!1;if(e.n=T,e.c|=x,e.d>-1&&!ye(e))return e.c&=~x,!1;let t=!1,s=p,n=g,a=h;try{p=e,g=L,h=0,J++;let r=e.k();(e.c&I||e.a!==r||e.d===-1)&&(t=!0,e.a=r,e.c&=~I,e.d=++T)}catch(r){t=!0,e.a=r,e.c|=I,e.d=++T}return xe(),p=s,g=n,h=a,e.c&=~x,t}i(e){let t=this;if(t.f.length<1){let s=t.b,n=s.length,a=0;for(t.c|=N;a<n;a++)s[a].i(t)}super.i(e)}g(e){let t=this;if(super.g(e),t.f.length<1){let s=t.b,n=s.length,a=0;for(t.c&=~N;a<n;a++)s[a].g(t)}}j(){let e=this;if(!(e.c&(O|x))){let t=e.f,s=t.length,n=0;for(e.c|=C|O;n<s;n++)t[n].j()}}peek(){let e=this;if(e.h(),e.c&I)throw e.a;return e.a}get value(){let e=this;if(e.h(),e.c&I)throw super.value;return super.value}set value(e){super.value=e}},W=class{constructor(e){let t=this;t.k=e,t.d=0,t.b=[],t.c=N,t.e=0}l(){let e=this;if(e.c&x)return;e.d=T,e.c|=x,e.c&=~C;let t=p,s=g,n=h;try{me(),p=e,g=L,h=0,J++,e.k()}finally{xe(),p=t,g=s,h=n,e.c&=~x,e.c&le&&pe(e),be()}}j(){let e=this;e.c&(O|x)||(e.c|=C|O,(M||=[]).push(e))}o(){let e=this;e.c|=le,e.c&x||pe(e)}},q=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=L,t.e=0,!e&&_&&(t.parent=_,t.e=_.e+1,_.scopes.push(t))}run(e){let t=_;try{return _=this,e()}finally{_=t}}clear(){let e=this,t=e.scopes,s=e.cleanups;for(let n of t)n.clear(),n.parent=L;for(let n of s)n();t.length=0,s.length=0}};function z(l){return new q(l)}function ke(l){ae(l)&&_&&_.cleanups.push(l)}function E(l){return new P(l)}function Q(l){return new U(l)}function v(l){let e=new W(l),t=e.o.bind(e);try{e.l()}catch(s){throw t(),s}return _&&e.b.length>0&&(e.e=_.e,_.cleanups.push(t)),t}var tt=!1,lt=1;var Y=null,we=Qe(),F=class extends HTMLElement{$m=!1;$c=z(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,s=e.constructor.$d;for(let n in s){let a=s[n];t[a]=E(we)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,s=e.constructor.$s,n=e.$c,a=e.$h,r=e.shadowRoot,f=!1;r||(r=e.attachShadow({mode:"open"}),f=!0);let d=Y;try{if(Y=e,n.run(()=>t(r,e)),document.adoptedStyleSheets)f&&(r.adoptedStyleSheets=s);else for(let u of s)K(r,u.cloneNode(!0));for(let u of a){let b=u();ae(b)&&n.cleanups.push(b)}a.length=0}finally{Y=d}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,s){let n=this,a=n.constructor.$d;e in a&&(n.$p[a[e]].value=s===""?!0:s)}};function re(l,e,t,s){let n=[],a=B.create(null);class r extends F{static observedAttributes=n;static $c=e;static $a=a;static $d=t;static $s=s}for(let f in t){let d=t[f],u=ge(f);a[u]=f,n.push(u),B.defineProperty(r.prototype,f,{get(){return this.$p[d].a},set(b){this.$p[d].value=b}})}return tt&&(l="velvet-"+lt++),l&&customElements.define(l,r),r}function V(l,e){let t=document.createTextNode("");l.nodeType===1?K(l,t):ve(l,t,!1),v(()=>t.data=e())}function X(l,e){let t=z(),s,n;v(()=>{let a=e();a!==s&&(n&&(t.clear(),Se(l,n),n=null),s=a,a&&(n=t.run(()=>a(l))))})}function Ee(l,e,t){let s=[],n=_.e+1;v(()=>{let a=t(),r=0,f=a.length,d=s.length;for(;r<f;r++)if(s[r]){let u=s[r][2];u.value=a[r]}else{let u=s[r-1],b=u?u[1]:l,w=E(a[r]),j=z(!0);j.e=n,s[r]=[j,j.run(()=>e(b,w,r)),w]}if(d>f){let u=s[r-1],b=u?u[1]:l,w=s[d-1][1];for(;r<d;r++)s[r][0].clear();Se(b,w),s.length=f}}),ke(()=>{for(let a=0,r=s.length;a<r;a++)s[a][0].clear()})}function Se(l,e){_e(l.nextSibling,e)}var st=S("<header class=header><h1>todos</h1><input class=new-todo placeholder='What needs to be done?'autofocus></header>"),nt=S("<section class=main><input id=toggle-all class=toggle-all type=checkbox><label for=toggle-all>Mark all as complete</label><ul class=todo-list><!></ul><footer class=footer><span class=todo-count> <strong></strong> <!> left </span><ul class=filters><li><a href=#/>All</a></li><li><a href=#/active>Active</a></li><li><a href=#/completed>Completed</a></li></ul></footer></section>"),at=S("<li><div class=view><input class=toggle type=checkbox><label><!></label><button class=destroy></button></div> <!></li>"),rt=S("<input class=edit>"),it=S("<button class=clear-completed>Clear completed</button>");function ct(l,e){let n="todos",a={all:i=>i,active:i=>i.filter(c=>!c.completed),completed:i=>i.filter(c=>c.completed)},r=E(JSON.parse(localStorage.getItem(n)||"[]")),f=E("all"),d=E(null),u=E(null),b=Q(()=>a[f.value](r.value)),w=Q(()=>a.active(r.value).length),j=i=>{r.value=r.value.map(c=>({...c,completed:i.target.checked}))},$e=()=>{r.value=r.value.filter(i=>!i.completed)},Ae=i=>{i.which===13&&(r.value=r.value.concat({id:Date.now(),title:i.target.value,completed:!1}),i.target.value="")},Ce=i=>{r.value=r.value.filter(c=>c.id!==i)},ce=i=>{r.value=r.value.map(c=>c.id!==i.id?c:{...c,...i})},Ne=(i,c)=>{ce({id:i,completed:c.target.checked})},Te=i=>{i.which===13?i.target.blur():i.which===27&&(d.value=null,u.value=null)},Oe=i=>{ce({id:d.value,title:i.target.value}),d.value=null,u.value=null},oe=()=>{let i=window.location.hash.replace(/#\/?/,"");a[i]||(i="all"),f.value=i};window.addEventListener("hashchange",oe),oe(),v(()=>localStorage.setItem(n,JSON.stringify(r.value))),v(()=>{u.value&&setTimeout(()=>u.value.focus())});let Z=$(st),Re=o(Z,[0,1]),je=o(Z,[0]),De=i=>{let c=$(nt),ue=o(c,[0,0]),Ie=o(c,[0,2,0]),Le=o(c,[0,3,0,1]),Pe=o(c,[0,3,0,3]),Ke=o(c,[0,3,1,0,0]),He=o(c,[0,3,1,1,0]),Me=o(c,[0,3,1,2,0]),Ge=o(c,[0,3,1]),Ye=o(c,[0]),Be=(ee,m)=>{let y=$(at),fe=o(y,[0,0,0]),Ue=o(y,[0,0,1,0]),We=o(y,[0,0,1]),qe=o(y,[0,0,2]),Fe=o(y,[0,2]),H=o(y,[0]),ze=te=>{let de=$(rt),D=o(de,[0]);return u.value=D,v(()=>D.value=m.value.title),k(D,"keydown",Te),k(D,"blur",Oe),R(te,de),D};return v(()=>fe.checked=m.value.completed),k(fe,"change",te=>Ne(m.value.id,te)),V(Ue,()=>m.value.title),k(We,"dblclick",()=>d.value=m.value.id),k(qe,"click",()=>Ce(m.value.id)),X(Fe,()=>d.value===m.value.id?ze:null),ne(H,"class","todo"),v(()=>A(H,"completed",m.value.completed)),v(()=>A(H,"editing",d.value===m.value.id)),R(ee,y),H},Je=ee=>{let m=$(it),y=o(m,[0]);return k(y,"click",$e),R(ee,m),y};return v(()=>ue.checked=w.value===0),k(ue,"change",j),Ee(Ie,Be,()=>b.value),V(Le,()=>w.value),V(Pe,()=>w.value===1?"item":"items"),v(()=>A(Ke,"selected",f.value==="all")),v(()=>A(He,"selected",f.value==="active")),v(()=>A(Me,"selected",f.value==="completed")),X(Ge,()=>r.value.length>w.value?Je:null),R(i,c),Ye};k(Re,"keydown",Ae),X(je,()=>r.value.length>0?De:null),K(l,Z)}var ie=re("x-app",ct,{},[]);ie.prototype.attachShadow=function(){return this};var ot=new ie;document.body.append(ot);
//# sourceMappingURL=index.js.map

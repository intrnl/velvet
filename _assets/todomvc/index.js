function $(s,e){let t=document.createElement("template");if(t.innerHTML=s,e){let l=t.content,n=l.firstChild,a;for(n.remove();a=n.firstChild;)l.appendChild(a)}return t}function A(s){return document.importNode(s.content,!0)}function o(s,e){let t=s,l=0,n=e.length,a,r;for(;l<n;l++)for(a=e[l],t=t.firstChild,r=0;r<a;r++)t=t.nextSibling;return t}function pe(s,e,t){if(s.replaceWith(e),t){let l;for(;l=s.firstChild;)e.appendChild(l)}}function K(s,e){s.append(e)}function R(s,e){s.after(e)}function ve(s,e){let t=s;if(e.nextSibling!==s)for(;t;){let l=t;if(t=t.nextSibling,l.remove(),l===e)break}}function w(s,e,t,l){s.addEventListener(e,t,l)}function se(s,e,t){s.setAttribute(e,t)}function C(s,e,t){s.classList.toggle(e,t)}var B=Object,ze=Symbol,Qe=/\B([A-Z])/g;function _e(s){return s.replace(Qe,"-$1").toLowerCase()}var Ve=B.is,Xe=B.assign,ne=s=>typeof s=="function";var k,x=1<<0,O=1<<1,N=1<<2,te=1<<3,I=1<<4,T=1<<5,_,f,g,d=0,M,G=0,le=0,L=0;function ge(){G++}function me(){if(G>1){G--;return}let s,e=!1;for(;M;){let t=M.sort((a,r)=>a.e-r.e),l=0,n=t.length;for(M=k,le++;l<n;l++){let a=t[l];if(a.c&=~O,!(a.c&te)&&be(a))try{a.m()}catch(r){e||(s=r,e=!0)}}}if(le=0,G--,e)throw s}function be(s){let e=s.b,t=e.length,l=0,n;for(;l<t;l++)if(n=e[l],n.d>s.d||n.i())return!0;return!1}function ye(){let s=f.b;if(g){if(he(),d>0){let l=g.length,n=0;for(s.length=d+l;n<l;n++)s[d+n]=g[n]}else s=f.b=g;let e=s.length,t=d;for(;t<e;t++){let l=s[t];l.g=k,f.c&T&&l.j(f)}}else d<f.b.length&&(he(),s.length=d);for(;d--;){let e=s[d];e.g=k}}function he(){let s=f.b,e=s.length,t=d;for(;t<e;t++){let l=s[t];l.h(f),l.g=k}}function de(s){let e=s.b,t=e.length,l=0;for(;l<t;l++)e[l].h(s);e.length=0}var P=class{constructor(e){let t=this;t.a=e,t.d=-1,t.f=[],t.g=k}i(){return!1}j(e){this.f.push(e)}h(e){let l=this.f,n=l.indexOf(e);l.splice(n,1)}subscribe(e){let t=this;return v(()=>{let l=f,n=t.value;try{f=k,e(n)}finally{f=l}})}set(e){return this.value=e}peek(){return this.a}get value(){let e=this;return f&&e.g!==f&&(e.g=f,!g&&f.b[d]===e?d++:g?g.push(e):g=[e]),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.d=++L,le<100)){let l=t.f,n=l.length,a=0;ge();try{for(;a<n;a++)l[a].k()}finally{me()}}}},J=class extends P{constructor(e){super();let t=this;t.l=e,t.b=[],t.c=N,t.d=-1}i(){let e=this;if(e.c&=~O,e.c&x||(e.c&(N|T))===T||(e.c&=~N,e.d===L))return!1;if(e.c|=x,e.d>-1&&!be(e))return e.c&=~x,!1;let t=f,l=g,n=d;try{f=e,g=k,d=0;let a=e.l();(e.c&I||e.a!==a||e.a===0)&&(e.a=a,e.c&=~I,e.d=++L)}catch(a){e.a=a,e.c|=I,e.d=++L}return ye(),f=t,g=l,d=n,e.c&=~x,!0}j(e){let t=this;if(t.f.length<1){let l=t.b,n=l.length,a=0;for(t.c|=T;a<n;a++)l[a].j(t)}super.j(e)}h(e){let t=this;if(super.h(e),t.f.length<1){let l=t.b,n=l.length,a=0;for(t.c&=~T;a<n;a++)l[a].h(t)}}k(){let e=this;if(!(e.c&(O|x))){let t=e.f,l=t.length,n=0;for(e.c|=N|O;n<l;n++)t[n].k()}}peek(){let e=this;if(e.i(),e.c&I)throw e.a;return e.a}get value(){let e=this;if(e.i(),e.c&I)throw super.value;return super.value}set value(e){super.value=e}},U=class{constructor(e){let t=this;t.l=e,t.d=0,t.b=[],t.c=T,t.e=0}m(){let e=this;if(e.c&x)return;e.d=L,e.c|=x,e.c&=~N;let t=f,l=g,n=d;try{ge(),f=e,g=k,d=0,e.l()}finally{ye(),f=t,g=l,d=n,e.c&=~x,e.c&te&&de(e),me()}}k(){let e=this;e.c&(O|x)||(e.c|=N|O,(M||=[]).push(e))}n(){let e=this;e.c|=te,e.c&x||de(e)}},W=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=k,t.e=0,!e&&_&&(t.parent=_,t.e=_.e+1,_.scopes.push(t))}run(e){let t=_;try{return _=this,e()}finally{_=t}}clear(){let e=this,t=e.scopes,l=e.cleanups;for(let n of t)n.clear(),n.parent=k;for(let n of l)n();t.length=0,l.length=0}};function F(s){return new W(s)}function xe(s){ne(s)&&_&&_.cleanups.push(s)}function S(s){return new P(s)}function z(s){return new J(s)}function v(s){let e=new U(s),t=e.n.bind(e);try{e.m()}catch(l){throw t(),l}return _&&e.b.length>0&&(e.e=_.e,_.cleanups.push(t)),t}var Ze=!1,et=1;var Y=null,ke=ze(),q=class extends HTMLElement{$m=!1;$c=F(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,l=e.constructor.$d;for(let n in l){let a=l[n];t[a]=S(ke)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,l=e.constructor.$s,n=e.$c,a=e.$h,r=e.shadowRoot,h=!1;r||(r=e.attachShadow({mode:"open"}),h=!0);let p=Y;try{if(Y=e,n.run(()=>t(r,e)),document.adoptedStyleSheets)h&&(r.adoptedStyleSheets=l);else for(let u of l)K(r,u.cloneNode(!0));for(let u of a){let b=u();ne(b)&&n.cleanups.push(b)}a.length=0}finally{Y=p}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,l){let n=this,a=n.constructor.$d;e in a&&(n.$p[a[e]].value=l===""?!0:l)}};function ae(s,e,t,l){let n=[],a=B.create(null);class r extends q{static observedAttributes=n;static $c=e;static $a=a;static $d=t;static $s=l}for(let h in t){let p=t[h],u=_e(h);a[u]=h,n.push(u),B.defineProperty(r.prototype,h,{get(){return this.$p[p].a},set(b){this.$p[p].value=b}})}return Ze&&(s="velvet-"+et++),s&&customElements.define(s,r),r}function Q(s,e){let t=document.createTextNode("");s.nodeType===1?K(s,t):pe(s,t,!1),v(()=>t.data=e())}function V(s,e){let t=F(),l,n;v(()=>{let a=e();a!==l&&(n&&(t.clear(),Ee(s,n),n=null),l=a,a&&(n=t.run(()=>a(s))))})}function we(s,e,t){let l=[],n=_.e+1;v(()=>{let a=t(),r=0,h=a.length,p=l.length;for(;r<h;r++)if(l[r]){let u=l[r][2];u.value=a[r]}else{let u=l[r-1],b=u?u[1]:s,E=S(a[r]),j=F(!0);j.e=n,l[r]=[j,j.run(()=>e(b,E,r)),E]}if(p>h){let u=l[r-1],b=u?u[1]:s,E=l[p-1][1];for(;r<p;r++)l[r][0].clear();Ee(b,E),l.length=h}}),xe(()=>{for(let a=0,r=l.length;a<r;a++)l[a][0].clear()})}function Ee(s,e){ve(s.nextSibling,e)}var tt=$("<header class=header><h1>todos</h1><input class=new-todo placeholder='What needs to be done?'autofocus></header>"),lt=$("<section class=main><input id=toggle-all class=toggle-all type=checkbox><label for=toggle-all>Mark all as complete</label><ul class=todo-list><!></ul><footer class=footer><span class=todo-count> <strong></strong> <!> left </span><ul class=filters><li><a href=#/>All</a></li><li><a href=#/active>Active</a></li><li><a href=#/completed>Completed</a></li></ul></footer></section>"),st=$("<li><div class=view><input class=toggle type=checkbox><label><!></label><button class=destroy></button></div> <!></li>"),nt=$("<input class=edit>"),at=$("<button class=clear-completed>Clear completed</button>");function rt(s,e){let n="todos",a={all:i=>i,active:i=>i.filter(c=>!c.completed),completed:i=>i.filter(c=>c.completed)},r=S(JSON.parse(localStorage.getItem(n)||"[]")),h=S("all"),p=S(null),u=S(null),b=z(()=>a[h.value](r.value)),E=z(()=>a.active(r.value).length),j=i=>{r.value=r.value.map(c=>({...c,completed:i.target.checked}))},Se=()=>{r.value=r.value.filter(i=>!i.completed)},$e=i=>{i.which===13&&(r.value=r.value.concat({id:Date.now(),title:i.target.value,completed:!1}),i.target.value="")},Ae=i=>{r.value=r.value.filter(c=>c.id!==i)},ie=i=>{r.value=r.value.map(c=>c.id!==i.id?c:{...c,...i})},Ce=(i,c)=>{ie({id:i,completed:c.target.checked})},Ne=i=>{i.which===13?i.target.blur():i.which===27&&(p.value=null,u.value=null)},Te=i=>{ie({id:p.value,title:i.target.value}),p.value=null,u.value=null},ce=()=>{let i=window.location.hash.replace(/#\/?/,"");a[i]||(i="all"),h.value=i};window.addEventListener("hashchange",ce),ce(),v(()=>localStorage.setItem(n,JSON.stringify(r.value))),v(()=>{u.value&&setTimeout(()=>u.value.focus())});let X=A(tt),Oe=o(X,[0,1]),Re=o(X,[0]),je=i=>{let c=A(lt),oe=o(c,[0,0]),De=o(c,[0,2,0]),Ie=o(c,[0,3,0,1]),Le=o(c,[0,3,0,3]),Pe=o(c,[0,3,1,0,0]),Ke=o(c,[0,3,1,1,0]),He=o(c,[0,3,1,2,0]),Me=o(c,[0,3,1]),Ge=o(c,[0]),Ye=(Z,m)=>{let y=A(st),ue=o(y,[0,0,0]),Je=o(y,[0,0,1,0]),Ue=o(y,[0,0,1]),We=o(y,[0,0,2]),qe=o(y,[0,2]),H=o(y,[0]),Fe=ee=>{let fe=A(nt),D=o(fe,[0]);return u.value=D,v(()=>D.value=m.value.title),w(D,"keydown",Ne),w(D,"blur",Te),R(ee,fe),D};return v(()=>ue.checked=m.value.completed),w(ue,"change",ee=>Ce(m.value.id,ee)),Q(Je,()=>m.value.title),w(Ue,"dblclick",()=>p.value=m.value.id),w(We,"click",()=>Ae(m.value.id)),V(qe,()=>p.value===m.value.id?Fe:null),se(H,"class","todo"),v(()=>C(H,"completed",m.value.completed)),v(()=>C(H,"editing",p.value===m.value.id)),R(Z,y),H},Be=Z=>{let m=A(at),y=o(m,[0]);return w(y,"click",Se),R(Z,m),y};return v(()=>oe.checked=E.value===0),w(oe,"change",j),we(De,Ye,()=>b.value),Q(Ie,()=>E.value),Q(Le,()=>E.value===1?"item":"items"),v(()=>C(Pe,"selected",h.value==="all")),v(()=>C(Ke,"selected",h.value==="active")),v(()=>C(He,"selected",h.value==="completed")),V(Me,()=>r.value.length>E.value?Be:null),R(i,c),Ge};w(Oe,"keydown",$e),V(Re,()=>r.value.length>0?je:null),K(s,X)}var re=ae("x-app",rt,{},[]);re.prototype.attachShadow=function(){return this};var it=new re;document.body.append(it);
//# sourceMappingURL=index.js.map

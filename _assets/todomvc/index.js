function x(s,e){let t=document.createElement("template");if(t.innerHTML=s,e){let l=t.content,i=l.firstChild,a;for(i.remove();a=i.firstChild;)l.appendChild(a)}return t}function S(s){return document.importNode(s.content,!0)}function o(s,e){let t=s,l=0,i=e.length,a,n;for(;l<i;l++)for(a=e[l],t=t.firstChild,n=0;n<a;n++)t=t.nextSibling;return t}function fe(s,e,t){if(s.replaceWith(e),t){let l;for(;l=s.firstChild;)e.appendChild(l)}}function L(s,e){s.append(e)}function N(s,e){s.after(e)}function de(s,e){let t=s;if(e.nextSibling!==s)for(;t;){let l=t;if(t=t.nextSibling,l.remove(),l===e)break}}function k(s,e,t,l){s.addEventListener(e,t,l)}function te(s,e,t){s.setAttribute(e,t)}function $(s,e,t){s.classList.toggle(e,t)}var G=Object,Fe=Symbol,ze=/\B([A-Z])/g;function he(s){return s.replace(ze,"-$1").toLowerCase()}var Qe=G.is,Ve=G.assign,le=s=>typeof s=="function";var h,g=1<<0,C=1<<1,O=1<<2,D=1<<3,j=1<<4,A=1<<5,_,f,K,H=0,ee=0,M=0;function pe(){H++}function ve(){if(H>1){H--;return}let s,e=!1;for(;K;){let t=K.sort((a,n)=>a.i-n.i),l=0,i=t.length;for(K=h,ee++;l<i;l++){let a=t[l];if(a.c&=~C,!(a.c&D)&&me(a))try{a.t()}catch(n){e||(s=n,e=!0)}}}if(ee=0,H--,e)throw s}function _e(s){if(!f)return h;let e=s.k;return!e||e.q!==f?(e={d:0,n:e,g:s,h:f.b,e:h,q:f,l:h,j:h},f.b&&(f.b.e=e),f.b=e,s.k=e,f.c&A&&s.o(e),e):e.d===-1?(e.d=0,e.e&&(e.e.h=e.h,e.h&&(e.h.e=e.e),e.h=f.b,e.e=h,f.b.e=e,f.b=e),e):h}function me(s){for(let e=s.b;e;e=e.e)if(e.g.d!==e.d||!e.g.p()||e.g.d!==e.d)return!0;return!1}function ge(s){for(let e=s.b;e;e=e.e){let t=e.g.k;if(t&&(e.n=t),e.g.k=e,e.d=-1,!e.e){s.b=e;break}}}function se(s){let e=s.b,t=h;for(;e;){let l=e.h;e.d===-1?(e.g.m(e),l&&(l.e=e.e),e.e&&(e.e.h=l)):t=e,e.g.k=e.n,e.n&&(e.n=h),e=l}s.b=t}function be(s){for(let e=s.b;e;e=e.e)e.g.m(e);s.b=h}function Xe(s){let e=this;se(e),f=s,e.c&=~g,e.c&D&&be(e),ve()}var I=class{constructor(e){this.a=e,this.d=0,this.k=h,this.f=h}p(){return!0}o(e){let t=this;t.f!==e&&!e.l&&(e.j=t.f,t.f&&(t.f.l=e),t.f=e)}m(e){let t=this;if(t.f){let l=e.l,i=e.j;l&&(l.j=i,e.l=h),i&&(i.l=l,e.j=h),e===t.f&&(t.f=i)}}subscribe(e){let t=this;return v(()=>{let l=f,i=t.value;try{f=h,e(i)}finally{f=l}})}set(e){return this.value=e}peek(){return this.a}get value(){let e=this,t=_e(e);return t&&(t.d=e.d),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.d++,M++,ee<100)){pe();try{for(let l=t.f;l;l=l.j)l.q.r()}finally{ve()}}}},Y=class extends I{constructor(e){super(),this.s=e,this.b=h,this.u=M-1,this.c=O}p(){let e=this;if(e.c&=~C,e.c&g)return!1;if((e.c&(O|A))===A||(e.c&=~O,e.u===M))return!0;if(e.c|=g,e.u=M,e.d>0&&!me(e))return e.c&=~g,!0;let t=f;try{ge(e),f=e;let l=e.s();(e.c&j||e.a!==l||e.a===0)&&(e.a=l,e.c&=~j,e.d++)}catch(l){e.a=l,e.c|=j,e.d++}return f=t,se(e),e.c&=~g,!0}o(e){let t=this;if(!t.f){t.c|=O|A;for(let l=t.b;l;l=l.e)l.g.o(l)}super.o(e)}m(e){let t=this;if(t.f&&(super.m(e),!t.f)){t.c&=~A;for(let l=t.b;l;l=l.e)l.g.m(l)}}r(){let e=this;if(!(e.c&(C|g))){e.c|=O|C;for(let t=e.f;t;t=t.j)t.q.r()}}peek(){let e=this;if(e.p(),e.c&j)throw e.a;return e.a}get value(){let e=this;if(e.p(),!(e.c&g)){let t=_e(e);t&&(t.d=e.d)}if(e.c&j)throw e.a;return e.a}set value(e){super.value=e}},B=class{constructor(e){this.s=e,this.b=h,this.c=A,this.i=0}t(){let e=this;if(e.c&(g|D))return;let t=e.v();try{e.s()}finally{t()}}v(){let e=this;e.c|=g,e.c&=~D,se(e),ge(e),pe();let t=f;return f=e,Xe.bind(e,t)}r(){let e=this;e.c&(C|g)||(e.c|=C,(K||=[]).push(e))}w(){let e=this;e.c|=D,e.c&g||be(e)}},J=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=h,t.i=0,!e&&_&&(t.parent=_,t.i=_.i+1,_.scopes.push(t))}run(e){let t=_;try{return _=this,e()}finally{_=t}}clear(){let e=this,t=e.scopes,l=e.cleanups;for(let i of t)i.clear(),i.parent=h;for(let i of l)i();t.length=0,l.length=0}};function W(s){return new J(s)}function ye(s){le(s)&&_&&_.cleanups.push(s)}function E(s){return new I(s)}function F(s){return new Y(s)}function v(s){let e=new B(s),t=e.w.bind(e);try{e.t()}catch(l){throw t(),l}return _&&e.b&&(e.i=_.i,_.cleanups.push(t)),t}var Ze=!1,et=1;var q=null,ke=Fe(),U=class extends HTMLElement{$m=!1;$c=W(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,l=e.constructor.$d;for(let i in l){let a=l[i];t[a]=E(ke)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,l=e.constructor.$s,i=e.$c,a=e.$h,n=e.shadowRoot,d=!1;n||(n=e.attachShadow({mode:"open"}),d=!0);let p=q;try{if(q=e,i.run(()=>t(n,e)),document.adoptedStyleSheets)d&&(n.adoptedStyleSheets=l);else for(let u of l)L(n,u.cloneNode(!0));for(let u of a){let b=u();le(b)&&i.cleanups.push(b)}a.length=0}finally{q=p}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,l){let i=this,a=i.constructor.$d;e in a&&(i.$p[a[e]].value=l===""?!0:l)}};function ne(s,e,t,l){let i=[],a=G.create(null);class n extends U{static observedAttributes=i;static $c=e;static $a=a;static $d=t;static $s=l}for(let d in t){let p=t[d],u=he(d);a[u]=d,i.push(u),G.defineProperty(n.prototype,d,{get(){return this.$p[p].a},set(b){this.$p[p].value=b}})}return Ze&&(s="velvet-"+et++),s&&customElements.define(s,n),n}function z(s,e){let t=document.createTextNode("");s.nodeType===1?L(s,t):fe(s,t,!1),v(()=>t.data=e())}function Q(s,e){let t=W(),l,i;v(()=>{let a=e();a!==l&&(i&&(t.clear(),Ee(s,i),i=null),l=a,a&&(i=t.run(()=>a(s))))})}function we(s,e,t){let l=[],i=_.i+1;v(()=>{let a=t(),n=0,d=a.length,p=l.length;for(;n<d;n++)if(l[n]){let u=l[n][2];u.value=a[n]}else{let u=l[n-1],b=u?u[1]:s,w=E(a[n]),T=W(!0);T.i=i,l[n]=[T,T.run(()=>e(b,w,n)),w]}if(p>d){let u=l[n-1],b=u?u[1]:s,w=l[p-1][1];for(;n<p;n++)l[n][0].clear();Ee(b,w),l.length=d}}),ye(()=>{for(let a=0,n=l.length;a<n;a++)l[a][0].clear()})}function Ee(s,e){de(s.nextSibling,e)}var tt=x("<header class=header><h1>todos</h1><input class=new-todo placeholder='What needs to be done?'autofocus></header>"),lt=x("<section class=main><input id=toggle-all class=toggle-all type=checkbox><label for=toggle-all>Mark all as complete</label><ul class=todo-list><!></ul><footer class=footer><span class=todo-count> <strong></strong> <!> left </span><ul class=filters><li><a href=#/>All</a></li><li><a href=#/active>Active</a></li><li><a href=#/completed>Completed</a></li></ul></footer></section>"),st=x("<li><div class=view><input class=toggle type=checkbox><label><!></label><button class=destroy></button></div> <!></li>"),nt=x("<input class=edit>"),at=x("<button class=clear-completed>Clear completed</button>");function it(s,e){let i="todos",a={all:r=>r,active:r=>r.filter(c=>!c.completed),completed:r=>r.filter(c=>c.completed)},n=E(JSON.parse(localStorage.getItem(i)||"[]")),d=E("all"),p=E(null),u=E(null),b=F(()=>a[d.value](n.value)),w=F(()=>a.active(n.value).length),T=r=>{n.value=n.value.map(c=>({...c,completed:r.target.checked}))},xe=()=>{n.value=n.value.filter(r=>!r.completed)},Se=r=>{r.which===13&&(n.value=n.value.concat({id:Date.now(),title:r.target.value,completed:!1}),r.target.value="")},$e=r=>{n.value=n.value.filter(c=>c.id!==r)},ie=r=>{n.value=n.value.map(c=>c.id!==r.id?c:{...c,...r})},Ae=(r,c)=>{ie({id:r,completed:c.target.checked})},Ce=r=>{r.which===13?r.target.blur():r.which===27&&(p.value=null,u.value=null)},Ne=r=>{ie({id:p.value,title:r.target.value}),p.value=null,u.value=null},re=()=>{let r=window.location.hash.replace(/#\/?/,"");a[r]||(r="all"),d.value=r};window.addEventListener("hashchange",re),re(),v(()=>localStorage.setItem(i,JSON.stringify(n.value))),v(()=>{u.value&&setTimeout(()=>u.value.focus())});let V=S(tt),Te=o(V,[0,1]),Re=o(V,[0]),Oe=r=>{let c=S(lt),ce=o(c,[0,0]),je=o(c,[0,2,0]),De=o(c,[0,3,0,1]),Ie=o(c,[0,3,0,3]),Le=o(c,[0,3,1,0,0]),Pe=o(c,[0,3,1,1,0]),Ke=o(c,[0,3,1,2,0]),He=o(c,[0,3,1]),Me=o(c,[0]),qe=(X,m)=>{let y=S(st),oe=o(y,[0,0,0]),Ye=o(y,[0,0,1,0]),Be=o(y,[0,0,1]),Je=o(y,[0,0,2]),Ue=o(y,[0,2]),P=o(y,[0]),We=Z=>{let ue=S(nt),R=o(ue,[0]);return u.value=R,v(()=>R.value=m.value.title),k(R,"keydown",Ce),k(R,"blur",Ne),N(Z,ue),R};return v(()=>oe.checked=m.value.completed),k(oe,"change",Z=>Ae(m.value.id,Z)),z(Ye,()=>m.value.title),k(Be,"dblclick",()=>p.value=m.value.id),k(Je,"click",()=>$e(m.value.id)),Q(Ue,()=>p.value===m.value.id?We:null),te(P,"class","todo"),v(()=>$(P,"completed",m.value.completed)),v(()=>$(P,"editing",p.value===m.value.id)),N(X,y),P},Ge=X=>{let m=S(at),y=o(m,[0]);return k(y,"click",xe),N(X,m),y};return v(()=>ce.checked=w.value===0),k(ce,"change",T),we(je,qe,()=>b.value),z(De,()=>w.value),z(Ie,()=>w.value===1?"item":"items"),v(()=>$(Le,"selected",d.value==="all")),v(()=>$(Pe,"selected",d.value==="active")),v(()=>$(Ke,"selected",d.value==="completed")),Q(He,()=>n.value.length>w.value?Ge:null),N(r,c),Me};k(Te,"keydown",Se),Q(Re,()=>n.value.length>0?Oe:null),L(s,V)}var ae=ne("x-app",it,{},[]);ae.prototype.attachShadow=function(){return this};var rt=new ae;document.body.append(rt);
//# sourceMappingURL=index.js.map

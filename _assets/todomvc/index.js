var B=Object,rt=Symbol,ct=/\B([A-Z])/g;function Oe(s){return s.replace(ct,"-$1").toLowerCase()}var ot=B.is,ut=B.assign,re=s=>typeof s=="function";var w,x=1,j=2,T=4,ae=8,K=16,O=32,dt=(s,e)=>s.c-e.c,g,f,m,d=0,H,M=0,ie=0,R=0;function Re(){M++}function je(){if(M>1){M--;return}let s,e=!1;for(;H;){let t=H.sort(dt),l=0,n=t.length;for(H=w,ie++;l<n;l++){let a=t[l];if(a.d&=~j,!(a.d&ae)&&De(a))try{a.m()}catch(i){e||(s=i,e=!0)}}}if(ie=0,M--,e)throw s}function De(s){let e=s.b,t=e.length,l=0,n;for(;l<t;l++)if(n=e[l],n.e>s.e||n.h())return!0;return!1}function Ie(){let s=f.b;if(m){if(Ne(),d>0){let l=m.length,n=0;for(s.length=d+l;n<l;n++)s[d+n]=m[n]}else s=f.b=m;let e=s.length,t=d;for(;t<e;t++){let l=s[t];l.i=w,f.d&O&&l.j(f)}}else d<f.b.length&&(Ne(),s.length=d);for(;d--;){let e=s[d];e.i=w}}function Ne(){let s=f.b,e=s.length,t=d;for(;t<e;t++)s[t].g(f)}function Te(s){let e=s.b,t=e.length,l=0;for(;l<t;l++)e[l].g(s);e.length=0}var Y=class{constructor(e){let t=this;t.a=e,t.e=-1,t.f=[],t.i=w}h(){return!1}j(e){this.f.push(e)}g(e){let l=this.f,n=l.indexOf(e);l.splice(n,1)}peek(){return this.a}get value(){let e=this;return f&&e.i!==f&&(e.i=f,m?m.push(e):f.b[d]===e?d++:m=[e]),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.e=++R,ie<100)){let l=t.f,n=l.length,a=0;for(Re();a<n;a++)l[a].k();je()}}},J=class extends Y{constructor(e){super();let t=this;t.l=e,t.b=[],t.d=T,t.n=-1}h(){let e=this;if(e.d&=~j,e.d&x||(e.d&(T|O))===O||(e.d&=~T,e.n===R))return!1;if(e.n=R,e.d|=x,e.e>-1&&!De(e))return e.d&=~x,!1;let t=!1,l=f,n=m,a=d;try{f=e,m=w,d=0;let i=e.l();(e.d&K||e.a!==i||e.e===-1)&&(t=!0,e.a=i,e.d&=~K,e.e=++R)}catch(i){t=!0,e.a=i,e.d|=K,e.e=++R}return Ie(),f=l,m=n,d=a,e.d&=~x,t}j(e){let t=this;if(t.f.length<1){let l=t.b,n=l.length,a=0;for(t.d|=O;a<n;a++)l[a].j(t)}super.j(e)}g(e){let t=this;if(super.g(e),t.f.length<1){let l=t.b,n=l.length,a=0;for(t.d&=~O;a<n;a++)l[a].g(t)}}k(){let e=this;if(!(e.d&(j|x))){let t=e.f,l=t.length,n=0;for(e.d|=T|j;n<l;n++)t[n].k()}}peek(){let e=this;if(e.h(),e.d&K)throw e.a;return e.a}get value(){let e=this;if(e.h(),e.d&K)throw super.value;return super.value}set value(e){super.value=e}},U=class{constructor(e){let t=this;t.l=e,t.e=0,t.b=[],t.d=O,t.c=0}m(){let e=this;if(e.d&x)return;e.e=R,e.d|=x,e.d&=~T;let t=f,l=m,n=d;try{Re(),f=e,m=w,d=0,e.l()}finally{Ie(),f=t,m=l,d=n,e.d&=~x,e.d&ae&&Te(e),je()}}k(){let e=this;e.d&(j|x)||(e.d|=T|j,(H||=[]).push(e))}o(){let e=this;e.d|=ae,e.d&x||Te(e)}},W=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=w,t.c=0,!e&&g&&(t.parent=g,t.c=g.c+1,g.scopes.push(t))}run(e){let t=g;try{return g=this,e()}finally{g=t}}clear(){let e=this,t=e.scopes,l=e.cleanups;for(let n of t)n.clear(),n.parent=w;for(let n of l)n();t.length=0,l.length=0}};function F(s){return new W(s)}function Le(s){re(s)&&g&&g.cleanups.push(s)}function E(s){return new Y(s)}function Z(s){return new J(s)}function _(s){let e=new U(s),t=e.o.bind(e);try{e.m()}catch(l){throw t(),l}return g&&e.b.length>0&&(e.c=g.c,g.cleanups.push(t)),t}var ft=!1,ht=1;var G=null,Pe=rt(),q=class extends HTMLElement{$m=!1;$c=F(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,l=e.constructor.$d;for(let n in l){let a=l[n];t[a]=E(Pe)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,l=e.constructor.$s,n=e.$c,a=e.$h,i=e.shadowRoot;i||(i=e.attachShadow({mode:"open"}),i.adoptedStyleSheets=l);let u=G;try{G=e,n.run(()=>t(i,e));for(let p of a){let o=p();re(o)&&n.cleanups.push(o)}a.length=0}finally{G=u}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,l){let n=this,a=n.constructor.$d;e in a&&(n.$p[a[e]].value=l===""?!0:l)}};function ce(s,e,t,l){let n=[],a=B.create(null);class i extends q{static observedAttributes=n;static $c=e;static $a=a;static $d=t;static $s=l}for(let u in t){let p=t[u],o=Oe(u);a[o]=u,n.push(o),B.defineProperty(i.prototype,u,{get(){return this.$p[p].a},set($){this.$p[p].value=$}})}return ft&&(s="velvet-"+ht++),s&&customElements.define(s,i),i}function S(s,e){let t=document.createElement("template");if(t.innerHTML=s,e){let l=t.content,n=l.firstChild,a;for(n.remove();a=n.firstChild;)l.appendChild(a)}return t}function A(s){return document.importNode(s.content,!0)}function c(s){return s.firstChild}function h(s){return s.nextSibling}function z(s,e,t){if(s.replaceWith(e),t){let l;for(;l=s.firstChild;)e.appendChild(l)}}function Q(s,e){s.append(e)}function D(s,e){s.after(e)}function Ke(s,e){let t=s;if(e.nextSibling!==s)for(;t;){let l=t;if(t=t.nextSibling,l.remove(),l===e)break}}function y(s,e,t,l){s.addEventListener(e,t,l)}function C(s,e,t){s.classList.toggle(e,t)}function V(s,e,t){let l=document.createTextNode("");t(s,l),_(()=>l.data=e())}function X(s,e){let t=F(),l,n;_(()=>{let a=e();a!==l&&(n&&(t.clear(),He(s,n),n=null),l=a,a&&(n=t.run(()=>a(s))))})}function Ye(s,e,t){let l=[],n=g.c+1;_(()=>{let a=t(),i=0,u=a.length,p=l.length;for(;i<u;i++)if(l[i]){let o=l[i][2];o.value=a[i]}else{let o=l[i-1],$=o?o[1]:s,k=E(a[i]),I=F(!0);I.c=n,l[i]=[I,I.run(()=>e($,k,i)),k]}if(p>u){let o=l[i-1],$=o?o[1]:s,k=l[p-1][1];for(;i<p;i++)l[i][0].clear();He($,k),l.length=u}}),Le(()=>{for(let a=0,i=l.length;a<i;a++)l[a][0].clear()})}function He(s,e){Ke(s.nextSibling,e)}var pt=S("<header class=header><h1>todos</h1><input class=new-todo placeholder='What needs to be done?'autofocus></header>"),vt=S("<section class=main><input id=toggle-all class=toggle-all type=checkbox><label for=toggle-all>Mark all as complete</label><ul class=todo-list><!></ul><footer class=footer><span class=todo-count> <strong></strong> <!> left </span><ul class=filters><li><a href=#/>All</a></li><li><a href=#/active>Active</a></li><li><a href=#/completed>Completed</a></li></ul></footer></section>"),_t=S("<li class=todo><div class=view><input class=toggle type=checkbox><label><!></label><button class=destroy></button></div> <!></li>"),gt=S("<input class=edit>"),mt=S("<button class=clear-completed>Clear completed</button>");function bt(s,e){let n="todos",a={all:r=>r,active:r=>r.filter(v=>!v.completed),completed:r=>r.filter(v=>v.completed)},i=E(JSON.parse(localStorage.getItem(n)||"[]")),u=E("all"),p=E(null),o=E(null),$=Z(()=>a[u.value](i.value)),k=Z(()=>a.active(i.value).length),I=r=>{i.value=i.value.map(v=>({...v,completed:r.target.checked}))},Me=()=>{i.value=i.value.filter(r=>!r.completed)},Ge=r=>{r.which===13&&(i.value=i.value.concat({id:Date.now(),title:r.target.value,completed:!1}),r.target.value="")},Be=r=>{i.value=i.value.filter(v=>v.id!==r)},ue=r=>{i.value=i.value.map(v=>v.id!==r.id?v:{...v,...r})},Je=(r,v)=>{ue({id:r,completed:v.target.checked})},Ue=r=>{r.which===13?r.target.blur():r.which===27&&(p.value=null,o.value=null)},We=r=>{ue({id:p.value,title:r.target.value}),p.value=null,o.value=null},de=()=>{let r=window.location.hash.replace(/#\/?/,"");a[r]||(r="all"),u.value=r};window.addEventListener("hashchange",de),de(),_(()=>localStorage.setItem(n,JSON.stringify(i.value))),_(()=>{o.value&&setTimeout(()=>o.value.focus())});let fe=A(pt),he=c(fe),pe=c(he),yt=c(pe),qe=h(pe),Fe=r=>{let v=A(vt),ve=c(v),ee=c(ve),_e=h(ee),kt=c(_e),ge=h(_e),Ze=c(ge),ze=h(ge),me=c(ze),Qe=c(me),be=h(Qe),Ve=h(be),xe=h(Ve),wt=h(xe),ye=h(me),ke=c(ye),we=c(ke),Et=c(we),Ee=h(ke),$e=c(Ee),$t=c($e),Xe=h(Ee),Se=c(Xe),St=c(Se),et=(te,b)=>{let N=A(_t),L=c(N),Ae=c(L),le=c(Ae),se=h(le),lt=c(se),st=h(se),nt=h(Ae),at=h(nt),it=ne=>{let Ce=A(gt),P=c(Ce);return o.value=P,_(()=>P.value=b.value.title),y(P,"keydown",Ue),y(P,"blur",We),D(ne,Ce),P};return _(()=>C(L,"completed",b.value.completed)),_(()=>C(L,"editing",p.value===b.value.id)),_(()=>le.checked=b.value.completed),y(le,"change",ne=>Je(b.value.id,ne)),y(se,"dblclick",()=>p.value=b.value.id),V(lt,()=>b.value.title,z),y(st,"click",()=>Be(b.value.id)),X(at,()=>p.value===b.value.id?it:null),D(te,N),L},tt=te=>{let b=A(mt),N=c(b),L=c(N);return y(N,"click",Me),D(te,b),N};return _(()=>ee.checked=k.value===0),y(ee,"change",I),Ye(Ze,et,()=>$.value),V(be,()=>k.value,Q),V(xe,()=>k.value===1?"item":"items",z),_(()=>C(we,"selected",u.value==="all")),_(()=>C($e,"selected",u.value==="active")),_(()=>C(Se,"selected",u.value==="completed")),X(ye,()=>i.value.length>k.value?tt:null),D(r,v),ve};y(qe,"keydown",Ge),X(he,()=>i.value.length>0?Fe:null),Q(s,fe)}var oe=ce("x-app",bt,{},[]);oe.prototype.attachShadow=function(){return this};var xt=new oe;document.body.append(xt);
//# sourceMappingURL=index.js.map

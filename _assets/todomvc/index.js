function $(s,e){let t=document.createElement("template");if(t.innerHTML=s,e){let l=t.content,n=l.firstChild,a;for(n.remove();a=n.firstChild;)l.appendChild(a)}return t}function A(s){return document.importNode(s.content,!0)}function c(s,e){let t=s,l=0,n=e.length,a,r;for(;l<n;l++)for(a=e[l],t=t.firstChild,r=0;r<a;r++)t=t.nextSibling;return t}function pe(s,e,t){if(s.replaceWith(e),t){let l;for(;l=s.firstChild;)e.appendChild(l)}}function K(s,e){s.append(e)}function j(s,e){s.after(e)}function ve(s,e){let t=s;if(e.nextSibling!==s)for(;t;){let l=t;if(t=t.nextSibling,l.remove(),l===e)break}}function k(s,e,t,l){s.addEventListener(e,t,l)}function se(s,e,t){s.setAttribute(e,t)}function C(s,e,t){s.classList.toggle(e,t)}var B=Object,ze=Symbol,Qe=/\B([A-Z])/g;function _e(s){return s.replace(Qe,"-$1").toLowerCase()}var Ve=B.is,Xe=B.assign,ne=s=>typeof s=="function";var E,x=1<<0,R=1<<1,N=1<<2,te=1<<3,L=1<<4,T=1<<5,_,f,g,h=0,M,G=0,le=0,O=0;function ge(){G++}function me(){if(G>1){G--;return}let s,e=!1;for(;M;){let t=M.sort((a,r)=>a.c-r.c),l=0,n=t.length;for(M=E,le++;l<n;l++){let a=t[l];if(a.d&=~R,!(a.d&te)&&be(a))try{a.m()}catch(r){e||(s=r,e=!0)}}}if(le=0,G--,e)throw s}function be(s){let e=s.b,t=e.length,l=0,n;for(;l<t;l++)if(n=e[l],n.e>s.e||n.h())return!0;return!1}function ye(){let s=f.b;if(g){if(de(),h>0){let l=g.length,n=0;for(s.length=h+l;n<l;n++)s[h+n]=g[n]}else s=f.b=g;let e=s.length,t=h;for(;t<e;t++){let l=s[t];l.i=E,f.d&T&&l.j(f)}}else h<f.b.length&&(de(),s.length=h);for(;h--;){let e=s[h];e.i=E}}function de(){let s=f.b,e=s.length,t=h;for(;t<e;t++)s[t].g(f)}function he(s){let e=s.b,t=e.length,l=0;for(;l<t;l++)e[l].g(s);e.length=0}var P=class{constructor(e){let t=this;t.a=e,t.e=-1,t.f=[],t.i=E}h(){return!1}j(e){this.f.push(e)}g(e){let l=this.f,n=l.indexOf(e);l.splice(n,1)}subscribe(e){let t=this;return v(()=>{let l=f,n=t.value;try{f=E,e(n)}finally{f=l}})}set(e){return this.value=e}peek(){return this.a}get value(){let e=this;return f&&e.i!==f&&(e.i=f,!g&&f.b[h]===e?h++:g?g.push(e):g=[e]),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.e=++O,le<100)){let l=t.f,n=l.length,a=0;ge();try{for(;a<n;a++)l[a].k()}finally{me()}}}},J=class extends P{constructor(e){super();let t=this;t.l=e,t.b=[],t.d=N,t.n=-1}h(){let e=this;if(e.d&=~R,e.d&x||(e.d&(N|T))===T||(e.d&=~N,e.n===O))return!1;if(e.n=O,e.d|=x,e.e>-1&&!be(e))return e.d&=~x,!1;let t=!1,l=f,n=g,a=h;try{f=e,g=E,h=0;let r=e.l();(e.d&L||e.a!==r||e.a===0)&&(t=!0,e.a=r,e.d&=~L,e.e=++O)}catch(r){t=!0,e.a=r,e.d|=L,e.e=++O}return ye(),f=l,g=n,h=a,e.d&=~x,t}j(e){let t=this;if(t.f.length<1){let l=t.b,n=l.length,a=0;for(t.d|=T;a<n;a++)l[a].j(t)}super.j(e)}g(e){let t=this;if(super.g(e),t.f.length<1){let l=t.b,n=l.length,a=0;for(t.d&=~T;a<n;a++)l[a].g(t)}}k(){let e=this;if(!(e.d&(R|x))){let t=e.f,l=t.length,n=0;for(e.d|=N|R;n<l;n++)t[n].k()}}peek(){let e=this;if(e.h(),e.d&L)throw e.a;return e.a}get value(){let e=this;if(e.h(),e.d&L)throw super.value;return super.value}set value(e){super.value=e}},U=class{constructor(e){let t=this;t.l=e,t.e=0,t.b=[],t.d=T,t.c=0}m(){let e=this;if(e.d&x)return;e.e=O,e.d|=x,e.d&=~N;let t=f,l=g,n=h;try{ge(),f=e,g=E,h=0,e.l()}finally{ye(),f=t,g=l,h=n,e.d&=~x,e.d&te&&he(e),me()}}k(){let e=this;e.d&(R|x)||(e.d|=N|R,(M||=[]).push(e))}o(){let e=this;e.d|=te,e.d&x||he(e)}},W=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=E,t.c=0,!e&&_&&(t.parent=_,t.c=_.c+1,_.scopes.push(t))}run(e){let t=_;try{return _=this,e()}finally{_=t}}clear(){let e=this,t=e.scopes,l=e.cleanups;for(let n of t)n.clear(),n.parent=E;for(let n of l)n();t.length=0,l.length=0}};function F(s){return new W(s)}function xe(s){ne(s)&&_&&_.cleanups.push(s)}function S(s){return new P(s)}function z(s){return new J(s)}function v(s){let e=new U(s),t=e.o.bind(e);try{e.m()}catch(l){throw t(),l}return _&&e.b.length>0&&(e.c=_.c,_.cleanups.push(t)),t}var Ze=!1,et=1;var Y=null,ke=ze(),q=class extends HTMLElement{$m=!1;$c=F(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,l=e.constructor.$d;for(let n in l){let a=l[n];t[a]=S(ke)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,l=e.constructor.$s,n=e.$c,a=e.$h,r=e.shadowRoot,d=!1;r||(r=e.attachShadow({mode:"open"}),d=!0);let p=Y;try{if(Y=e,n.run(()=>t(r,e)),document.adoptedStyleSheets)d&&(r.adoptedStyleSheets=l);else for(let u of l)K(r,u.cloneNode(!0));for(let u of a){let b=u();ne(b)&&n.cleanups.push(b)}a.length=0}finally{Y=p}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,l){let n=this,a=n.constructor.$d;e in a&&(n.$p[a[e]].value=l===""?!0:l)}};function ae(s,e,t,l){let n=[],a=B.create(null);class r extends q{static observedAttributes=n;static $c=e;static $a=a;static $d=t;static $s=l}for(let d in t){let p=t[d],u=_e(d);a[u]=d,n.push(u),B.defineProperty(r.prototype,d,{get(){return this.$p[p].a},set(b){this.$p[p].value=b}})}return Ze&&(s="velvet-"+et++),s&&customElements.define(s,r),r}function Q(s,e){let t=document.createTextNode("");s.nodeType===1?K(s,t):pe(s,t,!1),v(()=>t.data=e())}function V(s,e){let t=F(),l,n;v(()=>{let a=e();a!==l&&(n&&(t.clear(),Ee(s,n),n=null),l=a,a&&(n=t.run(()=>a(s))))})}function we(s,e,t){let l=[],n=_.c+1;v(()=>{let a=t(),r=0,d=a.length,p=l.length;for(;r<d;r++)if(l[r]){let u=l[r][2];u.value=a[r]}else{let u=l[r-1],b=u?u[1]:s,w=S(a[r]),D=F(!0);D.c=n,l[r]=[D,D.run(()=>e(b,w,r)),w]}if(p>d){let u=l[r-1],b=u?u[1]:s,w=l[p-1][1];for(;r<p;r++)l[r][0].clear();Ee(b,w),l.length=d}}),xe(()=>{for(let a=0,r=l.length;a<r;a++)l[a][0].clear()})}function Ee(s,e){ve(s.nextSibling,e)}var tt=$("<header class=header><h1>todos</h1><input class=new-todo placeholder='What needs to be done?'autofocus></header>"),lt=$("<section class=main><input id=toggle-all class=toggle-all type=checkbox><label for=toggle-all>Mark all as complete</label><ul class=todo-list><!></ul><footer class=footer><span class=todo-count> <strong></strong> <!> left </span><ul class=filters><li><a href=#/>All</a></li><li><a href=#/active>Active</a></li><li><a href=#/completed>Completed</a></li></ul></footer></section>"),st=$("<li><div class=view><input class=toggle type=checkbox><label><!></label><button class=destroy></button></div> <!></li>"),nt=$("<input class=edit>"),at=$("<button class=clear-completed>Clear completed</button>");function rt(s,e){let n="todos",a={all:i=>i,active:i=>i.filter(o=>!o.completed),completed:i=>i.filter(o=>o.completed)},r=S(JSON.parse(localStorage.getItem(n)||"[]")),d=S("all"),p=S(null),u=S(null),b=z(()=>a[d.value](r.value)),w=z(()=>a.active(r.value).length),D=i=>{r.value=r.value.map(o=>({...o,completed:i.target.checked}))},Se=()=>{r.value=r.value.filter(i=>!i.completed)},$e=i=>{i.which===13&&(r.value=r.value.concat({id:Date.now(),title:i.target.value,completed:!1}),i.target.value="")},Ae=i=>{r.value=r.value.filter(o=>o.id!==i)},ie=i=>{r.value=r.value.map(o=>o.id!==i.id?o:{...o,...i})},Ce=(i,o)=>{ie({id:i,completed:o.target.checked})},Ne=i=>{i.which===13?i.target.blur():i.which===27&&(p.value=null,u.value=null)},Te=i=>{ie({id:p.value,title:i.target.value}),p.value=null,u.value=null},oe=()=>{let i=window.location.hash.replace(/#\/?/,"");a[i]||(i="all"),d.value=i};window.addEventListener("hashchange",oe),oe(),v(()=>localStorage.setItem(n,JSON.stringify(r.value))),v(()=>{u.value&&setTimeout(()=>u.value.focus())});let X=A(tt),Oe=c(X,[0,1]),Re=c(X,[0]),je=i=>{let o=A(lt),ce=c(o,[0,0]),De=c(o,[0,2,0]),Ie=c(o,[0,3,0,1]),Le=c(o,[0,3,0,3]),Pe=c(o,[0,3,1,0,0]),Ke=c(o,[0,3,1,1,0]),He=c(o,[0,3,1,2,0]),Me=c(o,[0,3,1]),Ge=c(o,[0]),Ye=(Z,m)=>{let y=A(st),ue=c(y,[0,0,0]),Je=c(y,[0,0,1,0]),Ue=c(y,[0,0,1]),We=c(y,[0,0,2]),qe=c(y,[0,2]),H=c(y,[0]),Fe=ee=>{let fe=A(nt),I=c(fe,[0]);return u.value=I,v(()=>I.value=m.value.title),k(I,"keydown",Ne),k(I,"blur",Te),j(ee,fe),I};return v(()=>ue.checked=m.value.completed),k(ue,"change",ee=>Ce(m.value.id,ee)),Q(Je,()=>m.value.title),k(Ue,"dblclick",()=>p.value=m.value.id),k(We,"click",()=>Ae(m.value.id)),V(qe,()=>p.value===m.value.id?Fe:null),se(H,"class","todo"),v(()=>C(H,"completed",m.value.completed)),v(()=>C(H,"editing",p.value===m.value.id)),j(Z,y),H},Be=Z=>{let m=A(at),y=c(m,[0]);return k(y,"click",Se),j(Z,m),y};return v(()=>ce.checked=w.value===0),k(ce,"change",D),we(De,Ye,()=>b.value),Q(Ie,()=>w.value),Q(Le,()=>w.value===1?"item":"items"),v(()=>C(Pe,"selected",d.value==="all")),v(()=>C(Ke,"selected",d.value==="active")),v(()=>C(He,"selected",d.value==="completed")),V(Me,()=>r.value.length>w.value?Be:null),j(i,o),Ge};k(Oe,"keydown",$e),V(Re,()=>r.value.length>0?je:null),K(s,X)}var re=ae("x-app",rt,{},[]);re.prototype.attachShadow=function(){return this};var it=new re;document.body.append(it);
//# sourceMappingURL=index.js.map

var Ce=Object,lt=Symbol,st=/\B([A-Z])/g;function Oe(s){return s.replace(st,"-$1").toLowerCase()}var ae=s=>typeof s=="function";var w,x=1,j=2,T=4,ne=8,K=16,O=32,nt=(s,e)=>s.c-e.c,g,f,m,d=0,H,M=0,ie=0,R=0;function Re(){M++}function je(){if(M>1){M--;return}let s,e=!1;for(;H;){let t=H.sort(nt),l=0,n=t.length;for(H=w,ie++;l<n;l++){let i=t[l];if(i.d&=~j,!(i.d&ne)&&Pe(i))try{i.m()}catch(a){e||(s=a,e=!0)}}}if(ie=0,M--,e)throw s}function Pe(s){let e=s.b,t=e.length,l=0,n;for(;l<t;l++)if(n=e[l],n.e>s.e||n.h())return!0;return!1}function De(){let s=f.b;if(m){if(Ne(),d>0){let l=m.length,n=0;for(s.length=d+l;n<l;n++)s[d+n]=m[n]}else s=f.b=m;let e=s.length,t=d;for(;t<e;t++){let l=s[t];l.i=w,f.d&O&&l.j(f)}}else d<f.b.length&&(Ne(),s.length=d);for(;d--;){let e=s[d];e.i=w}}function Ne(){let s=f.b,e=s.length,t=d;for(;t<e;t++)s[t].g(f)}function Te(s){let e=s.b,t=e.length,l=0;for(;l<t;l++)e[l].g(s);e.length=0}var Y=class{constructor(e){let t=this;t.a=e,t.e=-1,t.f=[],t.i=w}h(){return!1}j(e){this.f.push(e)}g(e){let l=this.f,n=l.indexOf(e);l.splice(n,1)}peek(){return this.a}get value(){let e=this;return f&&e.i!==f&&(e.i=f,m?m.push(e):f.b[d]===e?d++:m=[e]),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.e=++R,ie<100)){let l=t.f,n=l.length,i=0;for(Re();i<n;i++)l[i].k();je()}}},B=class extends Y{constructor(e){super();let t=this;t.l=e,t.b=[],t.d=T,t.n=-1}h(){let e=this;if(e.d&=~j,e.d&x||(e.d&(T|O))===O||(e.d&=~T,e.n===R))return!1;if(e.n=R,e.d|=x,e.e>-1&&!Pe(e))return e.d&=~x,!1;let t=!1,l=f,n=m,i=d;try{f=e,m=w,d=0;let a=e.l();(e.d&K||e.a!==a||e.e===-1)&&(t=!0,e.a=a,e.d&=~K,e.e=++R)}catch(a){t=!0,e.a=a,e.d|=K,e.e=++R}return De(),f=l,m=n,d=i,e.d&=~x,t}j(e){let t=this;if(t.f.length<1){let l=t.b,n=l.length,i=0;for(t.d|=O;i<n;i++)l[i].j(t)}super.j(e)}g(e){let t=this;if(super.g(e),t.f.length<1){let l=t.b,n=l.length,i=0;for(t.d&=~O;i<n;i++)l[i].g(t)}}k(){let e=this;if(!(e.d&(j|x))){let t=e.f,l=t.length,n=0;for(e.d|=T|j;n<l;n++)t[n].k()}}peek(){let e=this;if(e.h(),e.d&K)throw e.a;return e.a}get value(){let e=this;if(e.h(),e.d&K)throw super.value;return super.value}set value(e){super.value=e}},J=class{constructor(e){let t=this;t.l=e,t.e=0,t.b=[],t.d=O,t.c=0}m(){let e=this;if(e.d&x)return;e.e=R,e.d|=x,e.d&=~T;let t=f,l=m,n=d;try{Re(),f=e,m=w,d=0,e.l()}finally{De(),f=t,m=l,d=n,e.d&=~x,e.d&ne&&Te(e),je()}}k(){let e=this;e.d&(j|x)||(e.d|=T|j,(H||=[]).push(e))}o(){let e=this;e.d|=ne,e.d&x||Te(e)}},U=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=w,t.c=0,!e&&g&&(t.parent=g,t.c=g.c+1,g.scopes.push(t))}run(e){let t=g;try{return g=this,e()}finally{g=t}}clear(){let e=this,t=e.scopes,l=e.cleanups;for(let n of t)n.clear(),n.parent=w;for(let n of l)n();t.length=0,l.length=0}};function q(s){return new U(s)}function Ie(s){ae(s)&&g&&g.cleanups.push(s)}function E(s){return new Y(s)}function F(s){return new B(s)}function v(s){let e=new J(s),t=e.o.bind(e);try{e.m()}catch(l){throw t(),l}return g&&e.b.length>0&&(e.c=g.c,g.cleanups.push(t)),t}var it=!1,at=1;var G=null,Le=lt(),W=class extends HTMLElement{$m=!1;$c=q(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,l=e.constructor.$d;for(let n in l){let i=l[n];t[i]=E(Le)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,l=e.constructor.$s,n=e.$c,i=e.$h,a=e.shadowRoot;a||(a=e.attachShadow({mode:"open"}),a.adoptedStyleSheets=l);let u=G;try{G=e,n.run(()=>t(a,e));for(let p of i){let o=p();ae(o)&&n.cleanups.push(o)}i.length=0}finally{G=u}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,l){let n=this,i=n.constructor.$d;e in i&&(n.$p[i[e]].value=l===""?!0:l)}};function re(s,e,t,l){let n=[],i=Ce.create(null);class a extends W{static observedAttributes=n;static $c=e;static $a=i;static $d=t;static $s=l}for(let u in t){let p=t[u],o=Oe(u);i[o]=u,n.push(o),Ce.defineProperty(a.prototype,u,{get(){return this.$p[p].a},set($){this.$p[p].value=$}})}return it&&(s="velvet-"+at++),s&&customElements.define(s,a),a}function S(s,e){let t=document.createElement("template");if(t.innerHTML=s,e){let l=t.content,n=l.firstChild,i;for(n.remove();i=n.firstChild;)l.appendChild(i)}return t}function A(s){return document.importNode(s.content,!0)}function c(s){return s.firstChild}function h(s){return s.nextSibling}function Z(s,e,t){if(s.replaceWith(e),t){let l;for(;l=s.firstChild;)e.appendChild(l)}}function z(s,e){s.append(e)}function P(s,e){s.after(e)}function Ke(s,e){let t=s;if(e.nextSibling!==s)for(;t;){let l=t;if(t=t.nextSibling,l.remove(),l===e)break}}function y(s,e,t,l){s.addEventListener(e,t,l)}function C(s,e,t){s.classList.toggle(e,t)}function Q(s,e,t){let l=document.createTextNode("");t(s,l),v(()=>l.data=e())}function V(s,e){let t=q(),l,n;v(()=>{let i=e();i!==l&&(n&&(t.clear(),He(s,n),n=null),l=i,i&&(n=t.run(()=>i(s))))})}function Ye(s,e,t){let l=[],n=g.c+1;v(()=>{let i=t(),a=0,u=i.length,p=l.length;for(;a<u;a++)if(l[a]){let o=l[a][2];o.value=i[a]}else{let o=l[a-1],$=o?o[1]:s,k=E(i[a]),D=q(!0);D.c=n,l[a]=[D,D.run(()=>e($,k,a)),k]}if(p>u){let o=l[a-1],$=o?o[1]:s,k=l[p-1][1];for(;a<p;a++)l[a][0].clear();He($,k),l.length=u}}),Ie(()=>{for(let i=0,a=l.length;i<a;i++)l[i][0].clear()})}function He(s,e){Ke(s.nextSibling,e)}var rt=S("<header class=header><h1>todos</h1><input class=new-todo placeholder='What needs to be done?'autofocus></header>"),ct=S("<section class=main><input id=toggle-all class=toggle-all type=checkbox><label for=toggle-all>Mark all as complete</label><ul class=todo-list><!></ul><footer class=footer><span class=todo-count> <strong></strong> <!> left </span><ul class=filters><li><a href=#/>All</a></li><li><a href=#/active>Active</a></li><li><a href=#/completed>Completed</a></li></ul></footer></section>"),ot=S("<li class=todo><div class=view><input class=toggle type=checkbox><label><!></label><button class=destroy></button></div> <!></li>"),ut=S("<input class=edit>"),dt=S("<button class=clear-completed>Clear completed</button>");function ft(s,e){let n="todos",i={all:r=>r,active:r=>r.filter(_=>!_.completed),completed:r=>r.filter(_=>_.completed)},a=E(JSON.parse(localStorage.getItem(n)||"[]")),u=E("all"),p=E(null),o=E(null),$=F(()=>i[u.value](a.value)),k=F(()=>i.active(a.value).length),D=r=>{a.value=a.value.map(_=>({..._,completed:r.target.checked}))},Me=()=>{a.value=a.value.filter(r=>!r.completed)},Ge=r=>{r.which===13&&(a.value=a.value.concat({id:Date.now(),title:r.target.value,completed:!1}),r.target.value="")},Be=r=>{a.value=a.value.filter(_=>_.id!==r)},oe=r=>{a.value=a.value.map(_=>_.id!==r.id?_:{..._,...r})},Je=(r,_)=>{oe({id:r,completed:_.target.checked})},Ue=r=>{r.which===13?r.target.blur():r.which===27&&(p.value=null,o.value=null)},We=r=>{oe({id:p.value,title:r.target.value}),p.value=null,o.value=null},ue=()=>{let r=window.location.hash.replace(/#\/?/,"");i[r]||(r="all"),u.value=r};window.addEventListener("hashchange",ue),ue(),v(()=>localStorage.setItem(n,JSON.stringify(a.value))),v(()=>{o.value&&setTimeout(()=>o.value.focus())});let de=A(rt),fe=c(de),he=c(fe),pt=c(he),qe=h(he),Fe=r=>{let _=A(ct),pe=c(_),X=c(pe),_e=h(X),_t=c(_e),ve=h(_e),Ze=c(ve),ge=c(h(ve)),me=h(c(ge)),be=h(h(me)),bt=h(be),xe=h(ge),ye=c(xe),ke=c(ye),xt=c(ke),we=h(ye),Ee=c(we),yt=c(Ee),$e=c(h(we)),wt=c($e),ze=(ee,b)=>{let N=A(ot),I=c(N),Se=c(I),te=c(Se),le=h(te),Ve=c(le),Xe=h(le),et=h(h(Se)),tt=se=>{let Ae=A(ut),L=c(Ae);return o.value=L,v(()=>L.value=b.value.title),y(L,"keydown",Ue),y(L,"blur",We),P(se,Ae),L};return v(()=>C(I,"completed",b.value.completed)),v(()=>C(I,"editing",p.value===b.value.id)),v(()=>te.checked=b.value.completed),y(te,"change",se=>Je(b.value.id,se)),y(le,"dblclick",()=>p.value=b.value.id),Q(Ve,()=>b.value.title,Z),y(Xe,"click",()=>Be(b.value.id)),V(et,()=>p.value===b.value.id?tt:null),P(ee,N),I},Qe=ee=>{let b=A(dt),N=c(b),I=c(N);return y(N,"click",Me),P(ee,b),N};return v(()=>X.checked=k.value===0),y(X,"change",D),Ye(Ze,ze,()=>$.value),Q(me,()=>k.value,z),Q(be,()=>k.value===1?"item":"items",Z),v(()=>C(ke,"selected",u.value==="all")),v(()=>C(Ee,"selected",u.value==="active")),v(()=>C($e,"selected",u.value==="completed")),V(xe,()=>a.value.length>k.value?Qe:null),P(r,_),pe};y(qe,"keydown",Ge),V(fe,()=>a.value.length>0?Fe:null),z(s,de)}var ce=re("x-app",ft,{},[]);ce.prototype.attachShadow=function(){return this};var ht=new ce;document.body.append(ht);
//# sourceMappingURL=index.js.map

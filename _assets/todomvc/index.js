var Te=Object,lt=Symbol,nt=/\B([A-Z])/g;function De(l){return l.replace(nt,"-$1").toLowerCase()}var ce=l=>typeof l=="function";var Y,w=1,j=2,T=4,ae=8,L=16,M=32,st=(l,e)=>l.e-e.e,m,d,b,g=0,G,U=0,re=0,O=0,it=0;function Pe(){U++}function Ie(){if(U>1){U--;return}let l,e=!1;for(;G;){let t=G.sort(st),n=0,s=t.length;for(G=Y,re++;n<s;n++){let i=t[n];if(i.a&=~j,!(i.a&ae)&&Ke(i))try{i.f()}catch(a){e||(l=a,e=!0)}}}if(re=0,U--,e)throw l}function Ke(l){let e=l.b,t=e.length,n=0,s;for(;n<t;n++)if(s=e[n],s.d>l.d||s.f())return!0;return!1}function Le(){let l=d.b;if(b){if(Oe(),g>0){let n=b.length,s=0;for(l.length=g+n;s<n;s++)l[g+s]=b[s]}else l=d.b=b;let e=l.length,t=g;for(;t<e;t++){let n=l[t];d.a&M&&n.k(d)}}else g<d.b.length&&(Oe(),l.length=g)}function Oe(){let l=d.b,e=l.length,t=g;for(;t<e;t++)l[t].i(d)}function je(l){let e=l.b,t=e.length,n=0;for(;n<t;n++)e[n].i(l);e.length=0}var B=class{d=-1;g=-1;h=[];c;constructor(e){let t=this;t.c=e}f(){return!1}k(e){this.h.push(e)}i(e){let n=this.h,s=n.indexOf(e);n.splice(s,1)}peek(){return this.c}get value(){let e=this;return d&&d.g!==e.g&&(e.g=d.g,b?b.push(e):d.b[g]===e?g++:b=[e]),e.c}set value(e){let t=this;if(t.c!==e&&(t.c=e,t.d=++O,re<100)){let n=t.h,s=n.length,i=0;for(Pe();i<s;i++)n[i].l();Ie()}}},J=class extends B{b=[];a=T;m=-1;j;constructor(e){super();let t=this;t.j=e}f(){let e=this,t=e.a&=~j;if(t&w||(t&M?!(t&T):e.m===O))return!1;if(e.a=t&~T|w,e.m=O,e.d>-1&&!Ke(e))return e.a&=~w,!1;let n=!1,s=d,i=b,a=g,o;try{d=e,b=Y,g=0,o=e.j(),(t&L||e.c!==o||e.d===-1)&&(n=!0,e.c=o,e.a&=~L,e.d=++O)}catch(c){n=!0,e.c=c,e.a|=L,e.d=++O}return Le(),d=s,b=i,g=a,e.a&=~w,n}k(e){let t=this;if(t.h.length<1){let n=t.b,s=n.length,i=0;for(t.a|=M;i<s;i++)n[i].k(t)}super.k(e)}i(e){let t=this;if(super.i(e),t.h.length<1){let n=t.b,s=n.length,i=0;for(t.a&=~M;i<s;i++)n[i].i(t)}}l(){let e=this;if(!(e.a&(j|w))){let t=e.h,n=t.length,s=0;for(e.a|=T|j;s<n;s++)t[s].l()}}peek(){let e=this;if(e.f(),e.a&L)throw e.c;return e.c}get value(){let e=this;if(e.f(),e.a&L)throw super.value;return super.value}set value(e){super.value=e}},W=class{d=0;g=0;b=[];a=M;e=0;j;constructor(e){let t=this;t.j=e}f(){let e=this,t=e.a;if(t&w)return;e.d=O,e.g=it++,e.a=t&~T|w;let n=d,s=b,i=g;try{Pe(),d=e,b=Y,g=0,e.j()}finally{Le(),d=n,b=s,g=i,e.a&=~w,e.a&ae&&je(e),Ie()}}l(){let e=this;e.a&(j|w)||(e.a|=T|j,(G||=[]).push(e))}n(){let e=this;e.a|=ae,e.a&w||je(e)}},F=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=Y,t.e=0,!e&&m&&(t.parent=m,t.e=m.e+1,m.scopes.push(t))}run(e){let t=m;try{return m=this,e()}finally{m=t}}clear(){let e=this,t=e.scopes,n=e.cleanups;for(let s of t)s.clear(),s.parent=Y;for(let s of n)s();t.length=0,n.length=0}};function H(l){return new F(l)}function Me(l){ce(l)&&m&&m.cleanups.push(l)}function k(l){return new B(l)}function z(l){return new J(l)}function v(l){let e=new W(l),t=e.n.bind(e);try{e.f()}catch(n){throw t(),n}return m&&e.b.length>0&&(e.e=m.e,m.cleanups.push(t)),t}var at=!1,rt=1;var q=null,Ye=lt(),Z=class extends HTMLElement{$m=!1;$c=H(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,n=e.constructor.$d;for(let s in n){let i=n[s];t[i]=k(Ye)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,n=e.constructor.$s,s=e.$c,i=e.$h,a=e.shadowRoot;a||(a=e.attachShadow({mode:"open"}),a.adoptedStyleSheets=n);let o=q;try{q=e,s.run(()=>t(a,e));for(let c=0,h=i.length;c<h;c++){let y=i[c],f=y();ce(f)&&s.cleanups.push(f)}i.length=0}finally{q=o}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,n){let s=this,i=s.constructor.$d;e in i&&(s.$p[i[e]].value=n===""?!0:n)}};function oe(l,e,t,n){let s=[],i=Te.create(null);class a extends Z{static observedAttributes=s;static $c=e;static $a=i;static $d=t;static $s=n}for(let o in t){let c=t[o],h=De(o);i[h]=o,s.push(h),Te.defineProperty(a.prototype,o,{get(){return this.$p[c].c},set(y){this.$p[c].value=y}})}return at&&(l="velvet-"+rt++),l&&customElements.define(l,a),a}function $(l,e){let t=document.createElement("template");if(t.innerHTML=l,e){let n=t.content,s=n.firstChild,i;for(s.remove();i=s.firstChild;)n.appendChild(i)}return t}function A(l){return document.importNode(l.content,!0)}function u(l){return l.firstChild}function p(l){return l.nextSibling}function Q(l,e,t){if(l.replaceWith(e),t){let n;for(;n=l.firstChild;)e.appendChild(n)}}function V(l,e){l.append(e)}function D(l,e){l.after(e)}function Be(l,e){let t=l;if(e.nextSibling!==l)for(;t;){let n=t;if(t=t.nextSibling,n.remove(),n===e)break}}function E(l,e,t,n){l.addEventListener(e,t,n)}function C(l,e,t){l.classList.toggle(e,t)}function X(l,e,t){let n=document.createTextNode("");t(l,n),v(()=>n.data=e())}function ee(l,e){let t=H(),n,s;v(()=>{let i=e();i!==n&&(s&&(t.clear(),ue(l,s),s=null),n=i,i&&(s=t.run(()=>i(l))))})}function He(l,e,t,n){let s=[],i=m.a+1,a=null;v(()=>{let o=t(),c=0,h=o.length,y=s.length;if(n&&a&&h>0){let f=a[0],S=a[1];f.clear(),ue(l,S),a=null}for(;c<h;c++)if(s[c]){let f=s[c][2];f.value=o[c]}else{let f=s[c-1],S=f?f[1]:l,N=k(o[c]),P=H(!0);P.a=i,s[c]=[P,P.run(()=>e(S,N,c)),N]}if(y>h){let f=s[c-1],S=f?f[1]:l,N=s[y-1][1];for(;c<y;c++)s[c][0].clear();ue(S,N),s.length=h}if(n&&!a&&h<1){let f=H(!0);f.a=i,a=[f,f.run(()=>n(l))]}}),Me(()=>{for(let o=0,c=s.length;o<c;o++)s[o][0].clear()})}function ue(l,e){Be(l.nextSibling,e)}var ct=$("<header class=header><h1>todos</h1><input class=new-todo placeholder='What needs to be done?'autofocus></header>"),ot=$("<section class=main><input id=toggle-all class=toggle-all type=checkbox><label for=toggle-all>Mark all as complete</label><ul class=todo-list><!></ul><footer class=footer><span class=todo-count> <strong></strong> <!> left </span><ul class=filters><li><a href=#/>All</a></li><li><a href=#/active>Active</a></li><li><a href=#/completed>Completed</a></li></ul></footer></section>"),ut=$("<li class=todo><div class=view><input class=toggle type=checkbox><label><!></label><button class=destroy></button></div> <!></li>"),ft=$("<input class=edit>"),ht=$("<button class=clear-completed>Clear completed</button>");function dt(l,e){let s="todos",i={all:r=>r,active:r=>r.filter(_=>!_.completed),completed:r=>r.filter(_=>_.completed)},a=k(JSON.parse(localStorage.getItem(s)||"[]")),o=k("all"),c=k(null),h=k(null),y=z(()=>i[o.value](a.value)),f=z(()=>i.active(a.value).length),S=r=>{a.value=a.value.map(_=>({..._,completed:r.target.checked}))},N=()=>{a.value=a.value.filter(r=>!r.completed)},P=r=>{r.which===13&&(a.value=a.value.concat({id:Date.now(),title:r.target.value,completed:!1}),r.target.value="")},Ge=r=>{a.value=a.value.filter(_=>_.id!==r)},he=r=>{a.value=a.value.map(_=>_.id!==r.id?_:{..._,...r})},Ue=(r,_)=>{he({id:r,completed:_.target.checked})},qe=r=>{r.which===13?r.target.blur():r.which===27&&(c.value=null,h.value=null)},Je=r=>{he({id:c.value,title:r.target.value}),c.value=null,h.value=null},de=()=>{let r=window.location.hash.replace(/#\/?/,"");i[r]||(r="all"),o.value=r};window.addEventListener("hashchange",de),de(),v(()=>localStorage.setItem(s,JSON.stringify(a.value))),v(()=>{h.value&&setTimeout(()=>h.value.focus())});let pe=A(ct),_e=u(pe),ge=u(_e),_t=u(ge),We=p(ge),Fe=r=>{let _=A(ot),ve=u(_),te=u(ve),me=p(te),gt=u(me),be=p(me),Ze=u(be),xe=u(p(be)),ye=p(u(xe)),we=p(p(ye)),xt=p(we),Ee=p(xe),ke=u(Ee),Se=u(ke),yt=u(Se),$e=p(ke),Ae=u($e),wt=u(Ae),Ce=u(p($e)),kt=u(Ce),ze=(le,x)=>{let R=A(ut),I=u(R),Ne=u(I),ne=u(Ne),se=p(ne),Ve=u(se),Xe=p(se),et=p(p(Ne)),tt=ie=>{let Re=A(ft),K=u(Re);return h.value=K,v(()=>K.value=x.value.title),E(K,"keydown",qe),E(K,"blur",Je),D(ie,Re),K};return v(()=>C(I,"completed",x.value.completed)),v(()=>C(I,"editing",c.value===x.value.id)),v(()=>ne.checked=x.value.completed),E(ne,"change",ie=>Ue(x.value.id,ie)),E(se,"dblclick",()=>c.value=x.value.id),X(Ve,()=>x.value.title,Q),E(Xe,"click",()=>Ge(x.value.id)),ee(et,()=>c.value===x.value.id?tt:null),D(le,R),I},Qe=le=>{let x=A(ht),R=u(x),I=u(R);return E(R,"click",N),D(le,x),R};return v(()=>te.checked=f.value===0),E(te,"change",S),He(Ze,ze,()=>y.value),X(ye,()=>f.value,V),X(we,()=>f.value===1?"item":"items",Q),v(()=>C(Se,"selected",o.value==="all")),v(()=>C(Ae,"selected",o.value==="active")),v(()=>C(Ce,"selected",o.value==="completed")),ee(Ee,()=>a.value.length>f.value?Qe:null),D(r,_),ve};E(We,"keydown",P),ee(_e,()=>a.value.length>0?Fe:null),V(l,pe)}var fe=oe("x-app",dt,{},[]);fe.prototype.attachShadow=function(){return this};var pt=new fe;document.body.append(pt);
//# sourceMappingURL=index.js.map
